"use strict";!function(){function e(e,t){return"rss"!==e?t:"google"===l?"https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=20&q="+t:"yql"===l?"https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20rss%20where%20url%3D%22"+t+"%22&format=json":void 0}function t(e,t,n){if("json"===e)return void n(u[t]);o();var i="e920a944-d799-4ed7-a017-322eb25ace70";t.indexOf("tuoitre.vn")>-1?i="bdf72c89-c94b-48f4-967b-b5bc3f8288f7":(t.indexOf("vnexpress.net")>-1||t.indexOf("gamethu.net")>-1)&&(i="e920a944-d799-4ed7-a017-322eb25ace70"),$.ajax({url:"https://api.import.io/store/connector/"+i+"/_query",data:{input:"webpage/url:"+t,_apikey:"59531d5e38004cbd944872b657c479fb6eb8a951555700c13023482aad713db52a65da670cd35dbe42a8fc32301bb78f419cba619c4c1c2e66ecde01de25b90dc014dece32953d8ad7c9de7ad788a261"},success:function(e){n(e.results[0])},error:function(e){c({title:"Error",text:e})},complete:function(){a()}})}function n(n,s){o(),s=e(n,s);var r=$.ajax({url:s});r.done(function(e){d.innerHTML="","rss"===n?"google"===l?u=e.responseData.feed?e.responseData.feed.entries:e.query.results.item:"yql"===l&&(u=e.query.results.item):"json"===n&&(u=e.results.results||e.results.items||e.results.collection1),u.forEach(function(e){d.innerHTML+=i(e)}),$("button.simple-ajax-popup").on("click",function(e){e.preventDefault();var i=$(this).data("link");return console.log(i),i?("json"===n&&(i=$(this).parents(".news-item").index()),void t(n,i,function(e){var t=e.content_html||e.content,n=$("<div>"+t+"</div");n.find(".nocontent").remove(),c({title:e.title,text:n.html()})})):void c({title:"no link",text:i})})}).complete(function(){a()})}function i(e){return e.content||(e.content=e.description||""),e.content=e.content.replace(new RegExp("/s146/","g"),"/s440/"),e.summary=e.summary||e.content,!e.image&&-1===e.summary.indexOf("<img ")&&e.content.indexOf("<img ")>-1&&(e.image=$(e.content).find("img:first-child").attr("src")),e.image=e.image?'<img src="'+e.image.replace(new RegExp("/s146/","g"),"/s440/")+'" />':"",e.time=e.time||e.publishedDate||e.pubDate||"",e.link=e.link||e.url,e.sourceText=e.source?" - "+e.source.text:"","<div class='news-item mdl-color-text--grey-700 mdl-shadow--2dp'>\n                    <div class='news-item__title'>\n                        <div class='news-item__title-text mdl-typography--title'>\n                           "+e.title+"\n                        </div>\n                        <div class='news-item__title-time'>"+e.time+" <b>"+e.sourceText+"</b></div>\n                    </div>\n                    <div class='news-item__content'>\n                        "+e.image+"\n                        "+e.summary+"\n                    </div>\n                    <div class='news-item__actions'>\n                        <button data-link='"+e.link+"' class='mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect simple-ajax-popup'>\n                          View more\n                        </button>\n                        <a href='"+e.link+"' target='_blank' class='mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect simple-ajax-popup'>\n                          Open web\n                        </a>\n                    </div>\n                </div>"}function o(){$(".loading-container").remove(),$('<div id="orrsLoader" class="loading-container"><div><div class="mdl-spinner mdl-js-spinner is-active"></div></div></div>').appendTo("body"),componentHandler.upgradeElements($(".mdl-spinner").get()),setTimeout(function(){$("#orrsLoader").css({opacity:1})},1)}function a(){$("#orrsLoader").css({opacity:0}),setTimeout(function(){$("#orrsLoader").remove()},400)}function c(e){e=$.extend({id:"orrsDiag",title:null,text:null,negative:!1,positive:!1,cancelable:!0,contentStyle:null,onLoaded:!1},e),$(".dialog-container").remove(),$(document).unbind("keyup.dialog"),$('<div id="'+e.id+'" class="dialog-container"><div class="mdl-card mdl-shadow--16dp"></div></div>').appendTo("body");var t=$("#orrsDiag"),n=t.find(".mdl-card");if(null!=e.contentStyle&&n.css(e.contentStyle),null!=e.title&&$("<h5>"+e.title+"</h5>").appendTo(n),null!=e.text&&$("<p>"+e.text+"</p>").appendTo(n),e.negative||e.positive){var i=$('<div class="mdl-card__actions dialog-button-bar"></div>');if(e.negative){e.negative=$.extend({id:"negative",title:"Cancel",onClick:function(){return!1}},e.negative);var o=$('<button class="mdl-button mdl-js-button mdl-js-ripple-effect" id="'+e.negative.id+'">'+e.negative.title+"</button>");o.click(function(n){n.preventDefault(),e.negative.onClick(n)||s(t)}),o.appendTo(i)}if(e.positive){e.positive=$.extend({id:"positive",title:"OK",onClick:function(){return!1}},e.positive);var a=$('<button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" id="'+e.positive.id+'">'+e.positive.title+"</button>");a.click(function(n){n.preventDefault(),e.positive.onClick(n)||s(t)}),a.appendTo(i)}i.appendTo(n)}componentHandler.upgradeDom(),e.cancelable&&(t.click(function(){s(t)}),$(document).bind("keyup.dialog",function(e){27==e.which&&s(t)}),n.click(function(e){e.stopPropagation()})),setTimeout(function(){t.css({opacity:1}),e.onLoaded&&e.onLoaded()},1)}function s(e){$(document).unbind("keyup.dialog"),e.css({opacity:0}),setTimeout(function(){e.remove()},400)}var r=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&("https:"===window.location.protocol||r)&&navigator.serviceWorker.register("service-worker.js").then(function(e){"function"==typeof e.update&&e.update(),e.onupdatefound=function(){if(navigator.serviceWorker.controller){var t=e.installing;t.onstatechange=function(){switch(t.state){case"installed":break;case"redundant":throw new Error("The installing service worker became redundant.")}}}}})["catch"](function(e){console.error("Error during service worker registration:",e)});var l="yql",d=document.getElementById("mainContent"),u=[];$(".change-news").click(function(e){n($(this).data("type"),$(this).data("url")),$(".mdl-layout__obfuscator").click()}),$(".change-news:first-child").click()}();
//# sourceMappingURL=main.min.js.map
