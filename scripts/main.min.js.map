{"version":3,"sources":["main.min.js","/source/main.js"],"names":["urlBuilder","type","url","rssReader","getNewsDetail","link","callback","news","showLoading","connector","indexOf","$","ajax","data","input","_apikey","success","response","results","error","_error","showDialog","title","text","complete","hideLoading","loadNews","promise","done","displayDiv","innerHTML","responseData","feed","entries","query","item","items","collection1","forEach","getTemplateNews","on","e","preventDefault","this","console","log","parents","index","detail","content_html","content","$content","find","remove","html","description","replace","RegExp","summary","image","attr","time","publishedDate","pubDate","sourceText","source","appendTo","componentHandler","upgradeElements","get","setTimeout","css","opacity","options","extend","id","negative","positive","cancelable","contentStyle","onLoaded","document","unbind","dialog","buttonBar","onClick","negButton","click","hideDialog","posButton","upgradeDom","bind","which","stopPropagation","isLocalhost","Boolean","window","location","hostname","match","navigator","protocol","serviceWorker","register","then","registration","update","onupdatefound","controller","installingWorker","installing","onstatechange","state","Error","getElementById"],"mappings":"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","file":"main.min.js","sourcesContent":["'use strict'; /* eslint-env browser */\n\n(function () {\n    'use strict';\n\n    // Check to make sure service workers are supported in the current browser,\n    // and that the current page is accessed from a secure origin. Using a\n    // service worker from an insecure origin will trigger JS console errors. See\n    // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n    var isLocalhost = Boolean(window.location.hostname === 'localhost' || \n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' || \n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));\n\n\n\n    if ('serviceWorker' in navigator && (\n    window.location.protocol === 'https:' || isLocalhost)) {\n        navigator.serviceWorker.register('service-worker.js').\n        then(function (registration) {\n            // Check to see if there's an updated version of service-worker.js with\n            // new files to cache:\n            // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-registration-update-method\n            if (typeof registration.update === 'function') {\n                registration.update();}\n\n\n            // updatefound is fired if service-worker.js changes.\n            registration.onupdatefound = function () {\n                // updatefound is also fired the very first time the SW is installed,\n                // and there's no need to prompt for a reload at that point.\n                // So check here to see if the page is already controlled,\n                // i.e. whether there's an existing service worker.\n                if (navigator.serviceWorker.controller) {\n                    // The updatefound event implies that registration.installing is set:\n                    // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n                    var installingWorker = registration.installing;\n\n                    installingWorker.onstatechange = function () {\n                        switch (installingWorker.state) {\n                            case 'installed':\n                                // At this point, the old content will have been purged and the\n                                // fresh content will have been added to the cache.\n                                // It's the perfect time to display a 'New content is\n                                // available; please refresh.' message in the page's interface.\n                                break;\n\n                            case 'redundant':\n                                throw new Error('The installing ' + \n                                'service worker became redundant.');\n\n                            default:\n                            // Ignore\n                        }};}};}).\n\n\n\n        catch(function (e) {\n            console.error('Error during service worker registration:', e);});}\n\n\n\n    // Your custom JavaScript goes here\n\n    // var rss_tuoitre = 'http://tuoitre.vn/rss/tt-tin-moi-nhat.rss';\n    // var rss_vnexpress = 'http://vnexpress.net/rss/tin-moi-nhat.rss';\n    var rssReader = 'yql';\n\n    function urlBuilder(type, url) {\n        if (type === \"rss\") {\n            if (rssReader === 'google') {\n                return 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=20&q=' + url;} else \n            if (rssReader === 'yql') {\n                return 'https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20rss%20where%20url%3D%22' + url + '%22&format=json';}} else \n\n        {\n            return url;}}\n\n\n\n    var displayDiv = document.getElementById('mainContent');\n\n    // Part 1 - Create a function that returns a promise\n    function getJsonAsync(url) {\n        // Promises require two functions: one for success, one for failure\n        return new Promise(function (resolve, reject) {\n            var xhr = new XMLHttpRequest();\n            xhr.open('GET', url);\n            xhr.onload = function () {\n                if (xhr.readyState == 4 && xhr.status === 200) {\n                    // We can resolve the promise\n                    resolve(xhr.response);} else \n                {\n                    // It's a failure, so let's reject the promise\n                    reject('Unable to load RSS');}};\n\n\n            xhr.onerror = function () {\n                // It's a failure, so let's reject the promise\n                reject('Unable to load RSS');};\n\n            xhr.send();});}\n\n\n\n    function getNewsDetail(type, link, callback) {\n        if (type === \"json\") {\n            callback(news[link]);\n            return;}\n\n\n        // get news detail by using rest api which are created by import.io\n        showLoading();\n        var connector = 'e920a944-d799-4ed7-a017-322eb25ace70';\n        if (link.indexOf('tuoitre.vn') > -1) {\n            connector = 'bdf72c89-c94b-48f4-967b-b5bc3f8288f7';} else \n        if (link.indexOf('vnexpress.net') > -1 || link.indexOf('gamethu.net') > -1) {\n            connector = 'e920a944-d799-4ed7-a017-322eb25ace70';}\n\n\n        $.ajax({ \n            url: 'https://api.import.io/store/connector/' + connector + '/_query', \n            data: { \n                input: 'webpage/url:' + link, \n                _apikey: '59531d5e38004cbd944872b657c479fb6eb8a951555700c13023482aad713db52a65da670cd35dbe42a8fc32301bb78f419cba619c4c1c2e66ecde01de25b90dc014dece32953d8ad7c9de7ad788a261' }, \n\n            success: function success(response) {\n                callback(response.results[0]);}, \n\n            error: function error(_error) {\n                showDialog({ \n                    title: 'Error', \n                    text: _error });}, \n\n\n            complete: function complete() {\n                hideLoading();} });}\n\n\n\n\n    var news = [];\n\n    function loadNews(type, url) {\n        showLoading();\n        url = urlBuilder(type, url);\n        var promise = $.ajax({ \n            url: url });\n        // crossDomain: true,\n        // dataType: \"jsonp\"\n\n        promise.done(function (response) {\n            displayDiv.innerHTML = '';\n            if (type === \"rss\") {\n                if (rssReader === 'google') {\n                    if (response.responseData.feed) {\n                        news = response.responseData.feed.entries;} else \n                    {\n                        news = response.query.results.item;}} else \n\n                if (rssReader === 'yql') {\n                    news = response.query.results.item;}} else \n\n            if (type === \"json\") {\n                news = response.results.results || response.results.items || response.results.collection1;}\n\n            news.forEach(function (item) {\n                displayDiv.innerHTML += getTemplateNews(item);});\n\n\n            $('button.simple-ajax-popup').on('click', function (e) {\n                e.preventDefault();\n                var link = $(this).data('link');\n                console.log(link);\n                if (!link) {\n                    showDialog({ \n                        title: 'no link', \n                        text: link });\n\n                    return;}\n\n                if (type === \"json\") {\n                    link = $(this).parents('.news-item').index();}\n                ;\n                getNewsDetail(type, link, function (detail) {\n                    var content_html = detail.content_html || detail.content;\n                    var $content = $('<div>' + content_html + '</div');\n                    $content.find('.nocontent').remove();\n                    // var $content = $(content_html).siblings(\".nocontent\").remove();\n                    showDialog({ \n                        title: detail.title, \n                        text: $content.html() });});});}).\n\n\n\n        complete(function () {\n            hideLoading();});}\n\n\n\n    function getTemplateNews(news) {\n        if (!news.content) {\n            news.content = news.description || \"\";}\n\n        news.content = news.content.replace(new RegExp('/s146/', 'g'), '/s440/');\n        news.summary = news.summary || news.content;\n        if (!news.image && news.summary.indexOf('<img ') === -1 && news.content.indexOf('<img ') > -1) {\n            news.image = $(news.content).find('img:first-child').attr('src');}\n\n        news.image = news.image ? '<img src=\"' + news.image.replace(new RegExp('/s146/', 'g'), '/s440/') + '\" />' : '';\n\n        news.time = news.time || news.publishedDate || news.pubDate || '';\n        news.link = news.link || news.url;\n        news.sourceText = news.source ? ' - ' + news.source.text : '';\n        return '<div class=\\'news-item mdl-color-text--grey-700 mdl-shadow--2dp\\'>\\n                    <div class=\\'news-item__title\\'>\\n                        <div class=\\'news-item__title-text mdl-typography--title\\'>\\n                           ' + \n\n\n        news.title + '\\n                        </div>\\n                        <div class=\\'news-item__title-time\\'>' + \n\n        news.time + ' <b>' + news.sourceText + '</b></div>\\n                    </div>\\n                    <div class=\\'news-item__content\\'>\\n                        ' + \n\n\n        news.image + '\\n                        ' + \n        news.summary + '\\n                    </div>\\n                    <div class=\\'news-item__actions\\'>\\n                        <button data-link=\\'' + \n\n\n        news.link + '\\' class=\\'mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect simple-ajax-popup\\'>\\n                          View more\\n                        </button>\\n                        <a href=\\'' + \n\n\n        news.link + '\\' target=\\'_blank\\' class=\\'mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect simple-ajax-popup\\'>\\n                          Open web\\n                        </a>\\n                    </div>\\n                </div>';}\n\n\n\n\n\n\n    $('.change-news').click(function (e) {\n        loadNews($(this).data('type'), $(this).data('url'));\n        $(\".mdl-layout__obfuscator\").click();});\n\n    $('.change-news:first-child').click();\n\n    // PLUGIN mdl-jquery-modal-dialog.js\n    function showLoading() {\n        // remove existing loaders\n        $('.loading-container').remove();\n        $('<div id=\"orrsLoader\" class=\"loading-container\"><div><div class=\"mdl-spinner mdl-js-spinner is-active\"></div></div></div>').appendTo(\"body\");\n\n        componentHandler.upgradeElements($('.mdl-spinner').get());\n        setTimeout(function () {\n            $('#orrsLoader').css({ \n                opacity: 1 });}, \n\n        1);}\n\n\n    function hideLoading() {\n        $('#orrsLoader').css({ \n            opacity: 0 });\n\n        setTimeout(function () {\n            $('#orrsLoader').remove();}, \n        400);}\n\n\n    function showDialog(options) {\n        options = $.extend({ \n            id: 'orrsDiag', \n            title: null, \n            text: null, \n            negative: false, \n            positive: false, \n            cancelable: true, \n            contentStyle: null, \n            onLoaded: false }, \n        options);\n\n        // remove existing dialogs\n        $('.dialog-container').remove();\n        $(document).unbind(\"keyup.dialog\");\n\n        $('<div id=\"' + options.id + '\" class=\"dialog-container\"><div class=\"mdl-card mdl-shadow--16dp\"></div></div>').appendTo(\"body\");\n        var dialog = $('#orrsDiag');\n        var content = dialog.find('.mdl-card');\n        if (options.contentStyle != null) content.css(options.contentStyle);\n        if (options.title != null) {\n            $('<h5>' + options.title + '</h5>').appendTo(content);}\n\n        if (options.text != null) {\n            $('<p>' + options.text + '</p>').appendTo(content);}\n\n        if (options.negative || options.positive) {\n            var buttonBar = $('<div class=\"mdl-card__actions dialog-button-bar\"></div>');\n            if (options.negative) {\n                options.negative = $.extend({ \n                    id: 'negative', \n                    title: 'Cancel', \n                    onClick: function onClick() {\n                        return false;} }, \n\n                options.negative);\n                var negButton = $('<button class=\"mdl-button mdl-js-button mdl-js-ripple-effect\" id=\"' + options.negative.id + '\">' + options.negative.title + '</button>');\n                negButton.click(function (e) {\n                    e.preventDefault();\n                    if (!options.negative.onClick(e)) \n                    hideDialog(dialog);});\n\n                negButton.appendTo(buttonBar);}\n\n            if (options.positive) {\n                options.positive = $.extend({ \n                    id: 'positive', \n                    title: 'OK', \n                    onClick: function onClick() {\n                        return false;} }, \n\n                options.positive);\n                var posButton = $('<button class=\"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\" id=\"' + options.positive.id + '\">' + options.positive.title + '</button>');\n                posButton.click(function (e) {\n                    e.preventDefault();\n                    if (!options.positive.onClick(e)) \n                    hideDialog(dialog);});\n\n                posButton.appendTo(buttonBar);}\n\n            buttonBar.appendTo(content);}\n\n        componentHandler.upgradeDom();\n        if (options.cancelable) {\n            dialog.click(function () {\n                hideDialog(dialog);});\n\n            $(document).bind(\"keyup.dialog\", function (e) {\n                if (e.which == 27) \n                hideDialog(dialog);});\n\n            content.click(function (e) {\n                e.stopPropagation();});}\n\n\n        setTimeout(function () {\n            dialog.css({ \n                opacity: 1 });\n\n            if (options.onLoaded) \n            options.onLoaded();}, \n        1);}\n\n\n    function hideDialog(dialog) {\n        $(document).unbind(\"keyup.dialog\");\n        dialog.css({ \n            opacity: 0 });\n\n        setTimeout(function () {\n            dialog.remove();}, \n        400);}})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQSxDQUFDLFlBQVc7QUFDUjs7Ozs7O0FBRFEsUUFPSixjQUFjLFFBQVEsT0FBTyxRQUFQLENBQWdCLFFBQWhCLEtBQTZCLFdBQTdCOztBQUV0QixXQUFPLFFBQVAsQ0FBZ0IsUUFBaEIsS0FBNkIsT0FBN0I7O0FBRUEsV0FBTyxRQUFQLENBQWdCLFFBQWhCLENBQXlCLEtBQXpCO0FBQ0ksNERBREosQ0FKc0IsQ0FBdEIsQ0FQSTs7OztBQWdCUixRQUFJLG1CQUFtQixTQUFuQjtBQUNDLFdBQU8sUUFBUCxDQUFnQixRQUFoQixLQUE2QixRQUE3QixJQUF5QyxXQUF6QyxDQURELEVBQ3dEO0FBQ3hELGtCQUFVLGFBQVYsQ0FBd0IsUUFBeEIsQ0FBaUMsbUJBQWpDO0FBQ0ssWUFETCxDQUNVLFVBQVMsWUFBVCxFQUF1Qjs7OztBQUl6QixnQkFBSSxPQUFPLGFBQWEsTUFBYixLQUF3QixVQUEvQixFQUEyQztBQUMzQyw2QkFBYSxNQUFiLEdBRDJDLENBQS9DOzs7O0FBSnlCLHdCQVN6QixDQUFhLGFBQWIsR0FBNkIsWUFBVzs7Ozs7QUFLcEMsb0JBQUksVUFBVSxhQUFWLENBQXdCLFVBQXhCLEVBQW9DOzs7QUFHcEMsd0JBQUksbUJBQW1CLGFBQWEsVUFBYixDQUhhOztBQUtwQyxxQ0FBaUIsYUFBakIsR0FBaUMsWUFBVztBQUN4QyxnQ0FBUSxpQkFBaUIsS0FBakI7QUFDSixpQ0FBSyxXQUFMOzs7OztBQUtJLHNDQUxKOztBQU9BLGlDQUFLLFdBQUw7QUFDSSxzQ0FBTSxJQUFJLEtBQUosQ0FBVTtBQUNaLGtFQURZLENBQWhCLENBREo7O0FBSUE7O0FBWkoseUJBRHdDLENBQVgsQ0FMRyxDQUF4QyxDQUx5QixDQVRKLENBQXZCLENBRFY7Ozs7QUF1Q08sYUF2Q1AsQ0F1Q2EsVUFBUyxDQUFULEVBQVk7QUFDakIsb0JBQVEsS0FBUixDQUFjLDJDQUFkLEVBQTJELENBQTNELEVBRGlCLENBQVosQ0F2Q2IsQ0FEd0QsQ0FENUQ7Ozs7Ozs7O0FBaEJRLFFBa0VKLFlBQVksS0FBWixDQWxFSTs7QUFvRVIsYUFBUyxVQUFULENBQW9CLElBQXBCLEVBQTBCLEdBQTFCLEVBQStCO0FBQzNCLFlBQUksU0FBUyxLQUFULEVBQWdCO0FBQ2hCLGdCQUFJLGNBQWMsUUFBZCxFQUF3QjtBQUN4Qix1QkFBTyx3RUFBd0UsR0FBeEUsQ0FEaUIsQ0FBNUI7QUFFTyxnQkFBSSxjQUFjLEtBQWQsRUFBcUI7QUFDNUIsdUJBQU8sNEZBQTRGLEdBQTVGLEdBQWtHLGlCQUFsRyxDQURxQixDQUF6QixDQUhYOztBQU1PO0FBQ0gsbUJBQU8sR0FBUCxDQURHLENBTlAsQ0FESjs7OztBQVlBLFFBQUksYUFBYSxTQUFTLGNBQVQsQ0FBd0IsYUFBeEIsQ0FBYjs7O0FBaEZJLGFBbUZDLFlBQVQsQ0FBc0IsR0FBdEIsRUFBMkI7O0FBRXZCLGVBQU8sSUFBSSxPQUFKLENBQVksVUFBUyxPQUFULEVBQWtCLE1BQWxCLEVBQTBCO0FBQ3pDLGdCQUFJLE1BQU0sSUFBSSxjQUFKLEVBQU4sQ0FEcUM7QUFFekMsZ0JBQUksSUFBSixDQUFTLEtBQVQsRUFBZ0IsR0FBaEIsRUFGeUM7QUFHekMsZ0JBQUksTUFBSixHQUFhLFlBQU07QUFDZixvQkFBSSxJQUFJLFVBQUosSUFBa0IsQ0FBbEIsSUFBdUIsSUFBSSxNQUFKLEtBQWUsR0FBZixFQUFvQjs7QUFFM0MsNEJBQVEsSUFBSSxRQUFKLENBQVIsQ0FGMkMsQ0FBL0M7QUFHTzs7QUFFSCwyQkFBTyxvQkFBUCxFQUZHLENBSFAsQ0FEUyxDQUg0Qjs7O0FBWXpDLGdCQUFJLE9BQUosR0FBYyxZQUFNOztBQUVoQix1QkFBTyxvQkFBUCxFQUZnQixDQUFOLENBWjJCOztBQWdCekMsZ0JBQUksSUFBSixHQWhCeUMsQ0FBMUIsQ0FBbkIsQ0FGdUIsQ0FBM0I7Ozs7QUFzQkEsYUFBUyxhQUFULENBQXVCLElBQXZCLEVBQTZCLElBQTdCLEVBQW1DLFFBQW5DLEVBQTZDO0FBQ3pDLFlBQUksU0FBUyxNQUFULEVBQWlCO0FBQ2pCLHFCQUFTLEtBQUssSUFBTCxDQUFULEVBRGlCO0FBRWpCLG1CQUZpQixDQUFyQjs7OztBQUR5QyxtQkFPekMsR0FQeUM7QUFRekMsWUFBSSxZQUFZLHNDQUFaLENBUnFDO0FBU3pDLFlBQUksS0FBSyxPQUFMLENBQWEsWUFBYixJQUE2QixDQUFDLENBQUQsRUFBSTtBQUNqQyx3QkFBWSxzQ0FBWixDQURpQyxDQUFyQztBQUVPLFlBQUksS0FBSyxPQUFMLENBQWEsZUFBYixJQUFnQyxDQUFDLENBQUQsSUFBTSxLQUFLLE9BQUwsQ0FBYSxhQUFiLElBQThCLENBQUMsQ0FBRCxFQUFJO0FBQy9FLHdCQUFZLHNDQUFaLENBRCtFLENBQTVFOzs7QUFJUCxVQUFFLElBQUYsQ0FBTztBQUNILGlCQUFLLDJDQUEyQyxTQUEzQyxHQUF1RCxTQUF2RDtBQUNMLGtCQUFNO0FBQ0YsdUJBQU8saUJBQWlCLElBQWpCO0FBQ1AseUJBQVMsa0tBQVQsRUFGSjs7QUFJQSxxQkFBUyxpQkFBUyxRQUFULEVBQW1CO0FBQ3hCLHlCQUFTLFNBQVMsT0FBVCxDQUFpQixDQUFqQixDQUFULEVBRHdCLENBQW5COztBQUdULG1CQUFPLGVBQVMsTUFBVCxFQUFnQjtBQUNuQiwyQkFBVztBQUNQLDJCQUFPLE9BQVA7QUFDQSwwQkFBTSxNQUFOLEVBRkosRUFEbUIsQ0FBaEI7OztBQU1QLHNCQUFVLG9CQUFXO0FBQ2pCLDhCQURpQixDQUFYLEVBZmQsRUFmeUMsQ0FBN0M7Ozs7O0FBb0NBLFFBQUksT0FBTyxFQUFQLENBN0lJOztBQStJUixhQUFTLFFBQVQsQ0FBa0IsSUFBbEIsRUFBd0IsR0FBeEIsRUFBNkI7QUFDekIsc0JBRHlCO0FBRXpCLGNBQU0sV0FBVyxJQUFYLEVBQWlCLEdBQWpCLENBQU4sQ0FGeUI7QUFHekIsWUFBSSxVQUFVLEVBQUUsSUFBRixDQUFPO0FBQ2pCLGlCQUFLLEdBQUwsRUFEVSxDQUFWLENBSHFCOzs7O0FBUXpCLGdCQUFRLElBQVIsQ0FBYSxVQUFTLFFBQVQsRUFBbUI7QUFDNUIsdUJBQVcsU0FBWCxHQUF1QixFQUF2QixDQUQ0QjtBQUU1QixnQkFBSSxTQUFTLEtBQVQsRUFBZ0I7QUFDaEIsb0JBQUksY0FBYyxRQUFkLEVBQXdCO0FBQ3hCLHdCQUFJLFNBQVMsWUFBVCxDQUFzQixJQUF0QixFQUE0QjtBQUM1QiwrQkFBTyxTQUFTLFlBQVQsQ0FBc0IsSUFBdEIsQ0FBMkIsT0FBM0IsQ0FEcUIsQ0FBaEM7QUFFTztBQUNILCtCQUFPLFNBQVMsS0FBVCxDQUFlLE9BQWYsQ0FBdUIsSUFBdkIsQ0FESixDQUZQLENBREo7O0FBTU8sb0JBQUksY0FBYyxLQUFkLEVBQXFCO0FBQzVCLDJCQUFPLFNBQVMsS0FBVCxDQUFlLE9BQWYsQ0FBdUIsSUFBdkIsQ0FEcUIsQ0FBekIsQ0FQWDs7QUFVTyxnQkFBSSxTQUFTLE1BQVQsRUFBaUI7QUFDeEIsdUJBQU8sU0FBUyxPQUFULENBQWlCLE9BQWpCLElBQTRCLFNBQVMsT0FBVCxDQUFpQixLQUFqQixJQUEwQixTQUFTLE9BQVQsQ0FBaUIsV0FBakIsQ0FEckMsQ0FBckI7O0FBR1AsaUJBQUssT0FBTCxDQUFhLGdCQUFRO0FBQ2pCLDJCQUFXLFNBQVgsSUFBd0IsZ0JBQWdCLElBQWhCLENBQXhCLENBRGlCLENBQVIsQ0FBYixDQWY0Qjs7O0FBbUI1QixjQUFFLDBCQUFGLEVBQThCLEVBQTlCLENBQWlDLE9BQWpDLEVBQTBDLFVBQVMsQ0FBVCxFQUFZO0FBQ2xELGtCQUFFLGNBQUYsR0FEa0Q7QUFFbEQsb0JBQUksT0FBTyxFQUFFLElBQUYsRUFBUSxJQUFSLENBQWEsTUFBYixDQUFQLENBRjhDO0FBR2xELHdCQUFRLEdBQVIsQ0FBWSxJQUFaLEVBSGtEO0FBSWxELG9CQUFJLENBQUMsSUFBRCxFQUFPO0FBQ1AsK0JBQVc7QUFDUCwrQkFBTyxTQUFQO0FBQ0EsOEJBQU0sSUFBTixFQUZKLEVBRE87O0FBS1AsMkJBTE8sQ0FBWDs7QUFPQSxvQkFBSSxTQUFTLE1BQVQsRUFBaUI7QUFDakIsMkJBQU8sRUFBRSxJQUFGLEVBQVEsT0FBUixDQUFnQixZQUFoQixFQUE4QixLQUE5QixFQUFQLENBRGlCLENBQXJCO0FBRUMsaUJBYmlEO0FBY2xELDhCQUFjLElBQWQsRUFBb0IsSUFBcEIsRUFBMEIsVUFBUyxNQUFULEVBQWlCO0FBQ3ZDLHdCQUFJLGVBQWUsT0FBTyxZQUFQLElBQXVCLE9BQU8sT0FBUCxDQURIO0FBRXZDLHdCQUFJLFdBQVcsRUFBRSxVQUFRLFlBQVIsR0FBcUIsT0FBckIsQ0FBYixDQUZtQztBQUd2Qyw2QkFBUyxJQUFULENBQWMsWUFBZCxFQUE0QixNQUE1Qjs7QUFIdUMsOEJBS3ZDLENBQVc7QUFDUCwrQkFBTyxPQUFPLEtBQVA7QUFDUCw4QkFBTSxTQUFTLElBQVQsRUFBTixFQUZKLEVBTHVDLENBQWpCLENBQTFCLENBZGtELENBQVosQ0FBMUMsQ0FuQjRCLENBQW5CLENBQWI7Ozs7QUE0Q0csZ0JBNUNILENBNENZLFlBQVc7QUFDbkIsMEJBRG1CLENBQVgsQ0E1Q1osQ0FSeUIsQ0FBN0I7Ozs7QUF5REEsYUFBUyxlQUFULENBQXlCLElBQXpCLEVBQStCO0FBQzNCLFlBQUksQ0FBQyxLQUFLLE9BQUwsRUFBYztBQUNmLGlCQUFLLE9BQUwsR0FBZSxLQUFLLFdBQUwsSUFBb0IsRUFBcEIsQ0FEQSxDQUFuQjs7QUFHQSxhQUFLLE9BQUwsR0FBZSxLQUFLLE9BQUwsQ0FBYSxPQUFiLENBQXFCLElBQUksTUFBSixDQUFXLFFBQVgsRUFBcUIsR0FBckIsQ0FBckIsRUFBZ0QsUUFBaEQsQ0FBZixDQUoyQjtBQUszQixhQUFLLE9BQUwsR0FBZSxLQUFLLE9BQUwsSUFBZ0IsS0FBSyxPQUFMLENBTEo7QUFNM0IsWUFBSSxDQUFDLEtBQUssS0FBTCxJQUFjLEtBQUssT0FBTCxDQUFhLE9BQWIsQ0FBcUIsT0FBckIsTUFBa0MsQ0FBQyxDQUFELElBQU0sS0FBSyxPQUFMLENBQWEsT0FBYixDQUFxQixPQUFyQixJQUFnQyxDQUFDLENBQUQsRUFBSTtBQUMzRixpQkFBSyxLQUFMLEdBQWEsRUFBRSxLQUFLLE9BQUwsQ0FBRixDQUFnQixJQUFoQixDQUFxQixpQkFBckIsRUFBd0MsSUFBeEMsQ0FBNkMsS0FBN0MsQ0FBYixDQUQyRixDQUEvRjs7QUFHQSxhQUFLLEtBQUwsR0FBYSxJQUFDLENBQUssS0FBTCxrQkFBMkIsS0FBSyxLQUFMLENBQVcsT0FBWCxDQUFtQixJQUFJLE1BQUosQ0FBVyxRQUFYLEVBQXFCLEdBQXJCLENBQW5CLEVBQThDLFFBQTlDLFVBQTVCLEdBQTRGLEVBQTVGLENBVGM7O0FBVzNCLGFBQUssSUFBTCxHQUFZLEtBQUssSUFBTCxJQUFhLEtBQUssYUFBTCxJQUFzQixLQUFLLE9BQUwsSUFBZ0IsRUFBbkQsQ0FYZTtBQVkzQixhQUFLLElBQUwsR0FBWSxLQUFLLElBQUwsSUFBYSxLQUFLLEdBQUwsQ0FaRTtBQWEzQixhQUFLLFVBQUwsR0FBa0IsS0FBSyxNQUFMLEdBQWMsUUFBUSxLQUFLLE1BQUwsQ0FBWSxJQUFaLEdBQW1CLEVBQXpDLENBYlM7QUFjM0I7OztBQUdxQixhQUFLLEtBQUw7O0FBRWdDLGFBQUssSUFBTCxZQUFnQixLQUFLLFVBQUw7OztBQUduRCxhQUFLLEtBQUw7QUFDQSxhQUFLLE9BQUw7OztBQUdtQixhQUFLLElBQUw7OztBQUdWLGFBQUssSUFBTCw4T0FmM0IsQ0FkMkIsQ0FBL0I7Ozs7Ozs7QUFvQ0EsTUFBRSxjQUFGLEVBQWtCLEtBQWxCLENBQXdCLFVBQVMsQ0FBVCxFQUFZO0FBQ2hDLGlCQUFTLEVBQUUsSUFBRixFQUFRLElBQVIsQ0FBYSxNQUFiLENBQVQsRUFBK0IsRUFBRSxJQUFGLEVBQVEsSUFBUixDQUFhLEtBQWIsQ0FBL0IsRUFEZ0M7QUFFaEMsVUFBRSx5QkFBRixFQUE2QixLQUE3QixHQUZnQyxDQUFaLENBQXhCLENBNU9ROztBQWdQUixNQUFFLDBCQUFGLEVBQThCLEtBQTlCOzs7QUFoUFEsYUFtUEMsV0FBVCxHQUF1Qjs7QUFFbkIsVUFBRSxvQkFBRixFQUF3QixNQUF4QixHQUZtQjtBQUduQixVQUFFLDBIQUFGLEVBQThILFFBQTlILENBQXVJLE1BQXZJLEVBSG1COztBQUtuQix5QkFBaUIsZUFBakIsQ0FBaUMsRUFBRSxjQUFGLEVBQWtCLEdBQWxCLEVBQWpDLEVBTG1CO0FBTW5CLG1CQUFXLFlBQVc7QUFDbEIsY0FBRSxhQUFGLEVBQWlCLEdBQWpCLENBQXFCO0FBQ2pCLHlCQUFTLENBQVQsRUFESixFQURrQixDQUFYOztBQUlSLFNBSkgsRUFObUIsQ0FBdkI7OztBQWFBLGFBQVMsV0FBVCxHQUF1QjtBQUNuQixVQUFFLGFBQUYsRUFBaUIsR0FBakIsQ0FBcUI7QUFDakIscUJBQVMsQ0FBVCxFQURKLEVBRG1COztBQUluQixtQkFBVyxZQUFXO0FBQ2xCLGNBQUUsYUFBRixFQUFpQixNQUFqQixHQURrQixDQUFYO0FBRVIsV0FGSCxFQUptQixDQUF2Qjs7O0FBU0EsYUFBUyxVQUFULENBQW9CLE9BQXBCLEVBQTZCO0FBQ3pCLGtCQUFVLEVBQUUsTUFBRixDQUFTO0FBQ2YsZ0JBQUksVUFBSjtBQUNBLG1CQUFPLElBQVA7QUFDQSxrQkFBTSxJQUFOO0FBQ0Esc0JBQVUsS0FBVjtBQUNBLHNCQUFVLEtBQVY7QUFDQSx3QkFBWSxJQUFaO0FBQ0EsMEJBQWMsSUFBZDtBQUNBLHNCQUFVLEtBQVYsRUFSTTtBQVNQLGVBVE8sQ0FBVjs7O0FBRHlCLFNBYXpCLENBQUUsbUJBQUYsRUFBdUIsTUFBdkIsR0FieUI7QUFjekIsVUFBRSxRQUFGLEVBQVksTUFBWixDQUFtQixjQUFuQixFQWR5Qjs7QUFnQnpCLFVBQUUsY0FBYyxRQUFRLEVBQVIsR0FBYSxnRkFBM0IsQ0FBRixDQUErRyxRQUEvRyxDQUF3SCxNQUF4SCxFQWhCeUI7QUFpQnpCLFlBQUksU0FBUyxFQUFFLFdBQUYsQ0FBVCxDQWpCcUI7QUFrQnpCLFlBQUksVUFBVSxPQUFPLElBQVAsQ0FBWSxXQUFaLENBQVYsQ0FsQnFCO0FBbUJ6QixZQUFJLFFBQVEsWUFBUixJQUF3QixJQUF4QixFQUE4QixRQUFRLEdBQVIsQ0FBWSxRQUFRLFlBQVIsQ0FBWixDQUFsQztBQUNBLFlBQUksUUFBUSxLQUFSLElBQWlCLElBQWpCLEVBQXVCO0FBQ3ZCLGNBQUUsU0FBUyxRQUFRLEtBQVIsR0FBZ0IsT0FBekIsQ0FBRixDQUFvQyxRQUFwQyxDQUE2QyxPQUE3QyxFQUR1QixDQUEzQjs7QUFHQSxZQUFJLFFBQVEsSUFBUixJQUFnQixJQUFoQixFQUFzQjtBQUN0QixjQUFFLFFBQVEsUUFBUSxJQUFSLEdBQWUsTUFBdkIsQ0FBRixDQUFpQyxRQUFqQyxDQUEwQyxPQUExQyxFQURzQixDQUExQjs7QUFHQSxZQUFJLFFBQVEsUUFBUixJQUFvQixRQUFRLFFBQVIsRUFBa0I7QUFDdEMsZ0JBQUksWUFBWSxFQUFFLHlEQUFGLENBQVosQ0FEa0M7QUFFdEMsZ0JBQUksUUFBUSxRQUFSLEVBQWtCO0FBQ2xCLHdCQUFRLFFBQVIsR0FBbUIsRUFBRSxNQUFGLENBQVM7QUFDeEIsd0JBQUksVUFBSjtBQUNBLDJCQUFPLFFBQVA7QUFDQSw2QkFBUyxtQkFBVztBQUNoQiwrQkFBTyxLQUFQLENBRGdCLENBQVgsRUFITTs7QUFNaEIsd0JBQVEsUUFBUixDQU5ILENBRGtCO0FBUWxCLG9CQUFJLFlBQVksRUFBRSx1RUFBdUUsUUFBUSxRQUFSLENBQWlCLEVBQWpCLEdBQXNCLElBQTdGLEdBQW9HLFFBQVEsUUFBUixDQUFpQixLQUFqQixHQUF5QixXQUE3SCxDQUFkLENBUmM7QUFTbEIsMEJBQVUsS0FBVixDQUFnQixVQUFTLENBQVQsRUFBWTtBQUN4QixzQkFBRSxjQUFGLEdBRHdCO0FBRXhCLHdCQUFJLENBQUMsUUFBUSxRQUFSLENBQWlCLE9BQWpCLENBQXlCLENBQXpCLENBQUQ7QUFDQSwrQkFBVyxNQUFYLEVBREosQ0FGWSxDQUFoQixDQVRrQjs7QUFjbEIsMEJBQVUsUUFBVixDQUFtQixTQUFuQixFQWRrQixDQUF0Qjs7QUFnQkEsZ0JBQUksUUFBUSxRQUFSLEVBQWtCO0FBQ2xCLHdCQUFRLFFBQVIsR0FBbUIsRUFBRSxNQUFGLENBQVM7QUFDeEIsd0JBQUksVUFBSjtBQUNBLDJCQUFPLElBQVA7QUFDQSw2QkFBUyxtQkFBVztBQUNoQiwrQkFBTyxLQUFQLENBRGdCLENBQVgsRUFITTs7QUFNaEIsd0JBQVEsUUFBUixDQU5ILENBRGtCO0FBUWxCLG9CQUFJLFlBQVksRUFBRSwyRkFBMkYsUUFBUSxRQUFSLENBQWlCLEVBQWpCLEdBQXNCLElBQWpILEdBQXdILFFBQVEsUUFBUixDQUFpQixLQUFqQixHQUF5QixXQUFqSixDQUFkLENBUmM7QUFTbEIsMEJBQVUsS0FBVixDQUFnQixVQUFTLENBQVQsRUFBWTtBQUN4QixzQkFBRSxjQUFGLEdBRHdCO0FBRXhCLHdCQUFJLENBQUMsUUFBUSxRQUFSLENBQWlCLE9BQWpCLENBQXlCLENBQXpCLENBQUQ7QUFDQSwrQkFBVyxNQUFYLEVBREosQ0FGWSxDQUFoQixDQVRrQjs7QUFjbEIsMEJBQVUsUUFBVixDQUFtQixTQUFuQixFQWRrQixDQUF0Qjs7QUFnQkEsc0JBQVUsUUFBVixDQUFtQixPQUFuQixFQWxDc0MsQ0FBMUM7O0FBb0NBLHlCQUFpQixVQUFqQixHQTlEeUI7QUErRHpCLFlBQUksUUFBUSxVQUFSLEVBQW9CO0FBQ3BCLG1CQUFPLEtBQVAsQ0FBYSxZQUFXO0FBQ3BCLDJCQUFXLE1BQVgsRUFEb0IsQ0FBWCxDQUFiLENBRG9COztBQUlwQixjQUFFLFFBQUYsRUFBWSxJQUFaLENBQWlCLGNBQWpCLEVBQWlDLFVBQVMsQ0FBVCxFQUFZO0FBQ3pDLG9CQUFJLEVBQUUsS0FBRixJQUFXLEVBQVg7QUFDQSwyQkFBVyxNQUFYLEVBREosQ0FENkIsQ0FBakMsQ0FKb0I7O0FBUXBCLG9CQUFRLEtBQVIsQ0FBYyxVQUFTLENBQVQsRUFBWTtBQUN0QixrQkFBRSxlQUFGLEdBRHNCLENBQVosQ0FBZCxDQVJvQixDQUF4Qjs7O0FBWUEsbUJBQVcsWUFBVztBQUNsQixtQkFBTyxHQUFQLENBQVc7QUFDUCx5QkFBUyxDQUFULEVBREosRUFEa0I7O0FBSWxCLGdCQUFJLFFBQVEsUUFBUjtBQUNBLG9CQUFRLFFBQVIsR0FESixDQUpPO0FBTVIsU0FOSCxFQTNFeUIsQ0FBN0I7OztBQW9GQSxhQUFTLFVBQVQsQ0FBb0IsTUFBcEIsRUFBNEI7QUFDeEIsVUFBRSxRQUFGLEVBQVksTUFBWixDQUFtQixjQUFuQixFQUR3QjtBQUV4QixlQUFPLEdBQVAsQ0FBVztBQUNQLHFCQUFTLENBQVQsRUFESixFQUZ3Qjs7QUFLeEIsbUJBQVcsWUFBVztBQUNsQixtQkFBTyxNQUFQLEdBRGtCLENBQVg7QUFFUixXQUZILEVBTHdCLENBQTVCLENBN1ZILENBQUQiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gQ2hlY2sgdG8gbWFrZSBzdXJlIHNlcnZpY2Ugd29ya2VycyBhcmUgc3VwcG9ydGVkIGluIHRoZSBjdXJyZW50IGJyb3dzZXIsXG4gICAgLy8gYW5kIHRoYXQgdGhlIGN1cnJlbnQgcGFnZSBpcyBhY2Nlc3NlZCBmcm9tIGEgc2VjdXJlIG9yaWdpbi4gVXNpbmcgYVxuICAgIC8vIHNlcnZpY2Ugd29ya2VyIGZyb20gYW4gaW5zZWN1cmUgb3JpZ2luIHdpbGwgdHJpZ2dlciBKUyBjb25zb2xlIGVycm9ycy4gU2VlXG4gICAgLy8gaHR0cDovL3d3dy5jaHJvbWl1bS5vcmcvSG9tZS9jaHJvbWl1bS1zZWN1cml0eS9wcmVmZXItc2VjdXJlLW9yaWdpbnMtZm9yLXBvd2VyZnVsLW5ldy1mZWF0dXJlc1xuICAgIHZhciBpc0xvY2FsaG9zdCA9IEJvb2xlYW4od2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSAnbG9jYWxob3N0JyB8fFxuICAgICAgICAvLyBbOjoxXSBpcyB0aGUgSVB2NiBsb2NhbGhvc3QgYWRkcmVzcy5cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSAnWzo6MV0nIHx8XG4gICAgICAgIC8vIDEyNy4wLjAuMS84IGlzIGNvbnNpZGVyZWQgbG9jYWxob3N0IGZvciBJUHY0LlxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUubWF0Y2goXG4gICAgICAgICAgICAvXjEyNyg/OlxcLig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPykpezN9JC9cbiAgICAgICAgKVxuICAgICk7XG5cbiAgICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvciAmJlxuICAgICAgICAod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyB8fCBpc0xvY2FsaG9zdCkpIHtcbiAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJ3NlcnZpY2Utd29ya2VyLmpzJylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlZ2lzdHJhdGlvbikge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGVyZSdzIGFuIHVwZGF0ZWQgdmVyc2lvbiBvZiBzZXJ2aWNlLXdvcmtlci5qcyB3aXRoXG4gICAgICAgICAgICAgICAgLy8gbmV3IGZpbGVzIHRvIGNhY2hlOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vc2xpZ2h0bHlvZmYuZ2l0aHViLmlvL1NlcnZpY2VXb3JrZXIvc3BlYy9zZXJ2aWNlX3dvcmtlci9pbmRleC5odG1sI3NlcnZpY2Utd29ya2VyLXJlZ2lzdHJhdGlvbi11cGRhdGUtbWV0aG9kXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWdpc3RyYXRpb24udXBkYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbi51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGVmb3VuZCBpcyBmaXJlZCBpZiBzZXJ2aWNlLXdvcmtlci5qcyBjaGFuZ2VzLlxuICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbi5vbnVwZGF0ZWZvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZWZvdW5kIGlzIGFsc28gZmlyZWQgdGhlIHZlcnkgZmlyc3QgdGltZSB0aGUgU1cgaXMgaW5zdGFsbGVkLFxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgdGhlcmUncyBubyBuZWVkIHRvIHByb21wdCBmb3IgYSByZWxvYWQgYXQgdGhhdCBwb2ludC5cbiAgICAgICAgICAgICAgICAgICAgLy8gU28gY2hlY2sgaGVyZSB0byBzZWUgaWYgdGhlIHBhZ2UgaXMgYWxyZWFkeSBjb250cm9sbGVkLFxuICAgICAgICAgICAgICAgICAgICAvLyBpLmUuIHdoZXRoZXIgdGhlcmUncyBhbiBleGlzdGluZyBzZXJ2aWNlIHdvcmtlci5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSB1cGRhdGVmb3VuZCBldmVudCBpbXBsaWVzIHRoYXQgcmVnaXN0cmF0aW9uLmluc3RhbGxpbmcgaXMgc2V0OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9zbGlnaHRseW9mZi5naXRodWIuaW8vU2VydmljZVdvcmtlci9zcGVjL3NlcnZpY2Vfd29ya2VyL2luZGV4Lmh0bWwjc2VydmljZS13b3JrZXItY29udGFpbmVyLXVwZGF0ZWZvdW5kLWV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFsbGluZ1dvcmtlciA9IHJlZ2lzdHJhdGlvbi5pbnN0YWxsaW5nO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YWxsaW5nV29ya2VyLm9uc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGluc3RhbGxpbmdXb3JrZXIuc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW5zdGFsbGVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF0IHRoaXMgcG9pbnQsIHRoZSBvbGQgY29udGVudCB3aWxsIGhhdmUgYmVlbiBwdXJnZWQgYW5kIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZnJlc2ggY29udGVudCB3aWxsIGhhdmUgYmVlbiBhZGRlZCB0byB0aGUgY2FjaGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIHRoZSBwZXJmZWN0IHRpbWUgdG8gZGlzcGxheSBhICdOZXcgY29udGVudCBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXZhaWxhYmxlOyBwbGVhc2UgcmVmcmVzaC4nIG1lc3NhZ2UgaW4gdGhlIHBhZ2UncyBpbnRlcmZhY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZWR1bmRhbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgaW5zdGFsbGluZyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2VydmljZSB3b3JrZXIgYmVjYW1lIHJlZHVuZGFudC4nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZHVyaW5nIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbjonLCBlKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFlvdXIgY3VzdG9tIEphdmFTY3JpcHQgZ29lcyBoZXJlXG5cbiAgICAvLyB2YXIgcnNzX3R1b2l0cmUgPSAnaHR0cDovL3R1b2l0cmUudm4vcnNzL3R0LXRpbi1tb2ktbmhhdC5yc3MnO1xuICAgIC8vIHZhciByc3Nfdm5leHByZXNzID0gJ2h0dHA6Ly92bmV4cHJlc3MubmV0L3Jzcy90aW4tbW9pLW5oYXQucnNzJztcbiAgICB2YXIgcnNzUmVhZGVyID0gJ3lxbCc7XG5cbiAgICBmdW5jdGlvbiB1cmxCdWlsZGVyKHR5cGUsIHVybCkge1xuICAgICAgICBpZiAodHlwZSA9PT0gXCJyc3NcIikge1xuICAgICAgICAgICAgaWYgKHJzc1JlYWRlciA9PT0gJ2dvb2dsZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L3NlcnZpY2VzL2ZlZWQvbG9hZD92PTEuMCZudW09MjAmcT0nICsgdXJsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyc3NSZWFkZXIgPT09ICd5cWwnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdodHRwczovL3F1ZXJ5LnlhaG9vYXBpcy5jb20vdjEvcHVibGljL3lxbD9xPXNlbGVjdCUyMColMjBmcm9tJTIwcnNzJTIwd2hlcmUlMjB1cmwlM0QlMjInICsgdXJsICsgJyUyMiZmb3JtYXQ9anNvbic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGRpc3BsYXlEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkNvbnRlbnQnKTtcblxuICAgIC8vIFBhcnQgMSAtIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHByb21pc2VcbiAgICBmdW5jdGlvbiBnZXRKc29uQXN5bmModXJsKSB7XG4gICAgICAgIC8vIFByb21pc2VzIHJlcXVpcmUgdHdvIGZ1bmN0aW9uczogb25lIGZvciBzdWNjZXNzLCBvbmUgZm9yIGZhaWx1cmVcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICAgICAgICB4aHIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0ICYmIHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBjYW4gcmVzb2x2ZSB0aGUgcHJvbWlzZVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHhoci5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSXQncyBhIGZhaWx1cmUsIHNvIGxldCdzIHJlamVjdCB0aGUgcHJvbWlzZVxuICAgICAgICAgICAgICAgICAgICByZWplY3QoJ1VuYWJsZSB0byBsb2FkIFJTUycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHhoci5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEl0J3MgYSBmYWlsdXJlLCBzbyBsZXQncyByZWplY3QgdGhlIHByb21pc2VcbiAgICAgICAgICAgICAgICByZWplY3QoJ1VuYWJsZSB0byBsb2FkIFJTUycpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHhoci5zZW5kKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE5ld3NEZXRhaWwodHlwZSwgbGluaywgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHR5cGUgPT09IFwianNvblwiKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhuZXdzW2xpbmtdKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGdldCBuZXdzIGRldGFpbCBieSB1c2luZyByZXN0IGFwaSB3aGljaCBhcmUgY3JlYXRlZCBieSBpbXBvcnQuaW9cbiAgICAgICAgc2hvd0xvYWRpbmcoKTtcbiAgICAgICAgdmFyIGNvbm5lY3RvciA9ICdlOTIwYTk0NC1kNzk5LTRlZDctYTAxNy0zMjJlYjI1YWNlNzAnO1xuICAgICAgICBpZiAobGluay5pbmRleE9mKCd0dW9pdHJlLnZuJykgPiAtMSkge1xuICAgICAgICAgICAgY29ubmVjdG9yID0gJ2JkZjcyYzg5LWM5NGItNDhmNC05NjdiLWI1YmMzZjgyODhmNyc7XG4gICAgICAgIH0gZWxzZSBpZiAobGluay5pbmRleE9mKCd2bmV4cHJlc3MubmV0JykgPiAtMSB8fCBsaW5rLmluZGV4T2YoJ2dhbWV0aHUubmV0JykgPiAtMSkge1xuICAgICAgICAgICAgY29ubmVjdG9yID0gJ2U5MjBhOTQ0LWQ3OTktNGVkNy1hMDE3LTMyMmViMjVhY2U3MCc7XG4gICAgICAgIH1cblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkuaW1wb3J0LmlvL3N0b3JlL2Nvbm5lY3Rvci8nICsgY29ubmVjdG9yICsgJy9fcXVlcnknLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlucHV0OiAnd2VicGFnZS91cmw6JyArIGxpbmssXG4gICAgICAgICAgICAgICAgX2FwaWtleTogJzU5NTMxZDVlMzgwMDRjYmQ5NDQ4NzJiNjU3YzQ3OWZiNmViOGE5NTE1NTU3MDBjMTMwMjM0ODJhYWQ3MTNkYjUyYTY1ZGE2NzBjZDM1ZGJlNDJhOGZjMzIzMDFiYjc4ZjQxOWNiYTYxOWM0YzFjMmU2NmVjZGUwMWRlMjViOTBkYzAxNGRlY2UzMjk1M2Q4YWQ3YzlkZTdhZDc4OGEyNjEnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwb25zZS5yZXN1bHRzWzBdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzaG93RGlhbG9nKHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdFcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGVycm9yXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIG5ld3MgPSBbXTtcblxuICAgIGZ1bmN0aW9uIGxvYWROZXdzKHR5cGUsIHVybCkge1xuICAgICAgICBzaG93TG9hZGluZygpO1xuICAgICAgICB1cmwgPSB1cmxCdWlsZGVyKHR5cGUsIHVybCk7XG4gICAgICAgIHZhciBwcm9taXNlID0gJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgLy8gY3Jvc3NEb21haW46IHRydWUsXG4gICAgICAgICAgICAvLyBkYXRhVHlwZTogXCJqc29ucFwiXG4gICAgICAgIH0pO1xuICAgICAgICBwcm9taXNlLmRvbmUoZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGRpc3BsYXlEaXYuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJyc3NcIikge1xuICAgICAgICAgICAgICAgIGlmIChyc3NSZWFkZXIgPT09ICdnb29nbGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5yZXNwb25zZURhdGEuZmVlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3cyA9IHJlc3BvbnNlLnJlc3BvbnNlRGF0YS5mZWVkLmVudHJpZXM7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdzID0gcmVzcG9uc2UucXVlcnkucmVzdWx0cy5pdGVtO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyc3NSZWFkZXIgPT09ICd5cWwnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld3MgPSByZXNwb25zZS5xdWVyeS5yZXN1bHRzLml0ZW07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBcImpzb25cIikge1xuICAgICAgICAgICAgICAgIG5ld3MgPSByZXNwb25zZS5yZXN1bHRzLnJlc3VsdHMgfHwgcmVzcG9uc2UucmVzdWx0cy5pdGVtcyB8fCByZXNwb25zZS5yZXN1bHRzLmNvbGxlY3Rpb24xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3cy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlEaXYuaW5uZXJIVE1MICs9IGdldFRlbXBsYXRlTmV3cyhpdGVtKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKCdidXR0b24uc2ltcGxlLWFqYXgtcG9wdXAnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gJCh0aGlzKS5kYXRhKCdsaW5rJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobGluayk7XG4gICAgICAgICAgICAgICAgaWYgKCFsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dEaWFsb2coe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdubyBsaW5rJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGxpbmtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJqc29uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGluayA9ICQodGhpcykucGFyZW50cygnLm5ld3MtaXRlbScpLmluZGV4KCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBnZXROZXdzRGV0YWlsKHR5cGUsIGxpbmssIGZ1bmN0aW9uKGRldGFpbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudF9odG1sID0gZGV0YWlsLmNvbnRlbnRfaHRtbCB8fCBkZXRhaWwuY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRjb250ZW50ID0gJCgnPGRpdj4nK2NvbnRlbnRfaHRtbCsnPC9kaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRlbnQuZmluZCgnLm5vY29udGVudCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgJGNvbnRlbnQgPSAkKGNvbnRlbnRfaHRtbCkuc2libGluZ3MoXCIubm9jb250ZW50XCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBzaG93RGlhbG9nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBkZXRhaWwudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAkY29udGVudC5odG1sKClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLmNvbXBsZXRlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VGVtcGxhdGVOZXdzKG5ld3MpIHtcbiAgICAgICAgaWYgKCFuZXdzLmNvbnRlbnQpIHtcbiAgICAgICAgICAgIG5ld3MuY29udGVudCA9IG5ld3MuZGVzY3JpcHRpb24gfHwgXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBuZXdzLmNvbnRlbnQgPSBuZXdzLmNvbnRlbnQucmVwbGFjZShuZXcgUmVnRXhwKCcvczE0Ni8nLCAnZycpLCAnL3M0NDAvJyk7XG4gICAgICAgIG5ld3Muc3VtbWFyeSA9IG5ld3Muc3VtbWFyeSB8fCBuZXdzLmNvbnRlbnQ7XG4gICAgICAgIGlmICghbmV3cy5pbWFnZSAmJiBuZXdzLnN1bW1hcnkuaW5kZXhPZignPGltZyAnKSA9PT0gLTEgJiYgbmV3cy5jb250ZW50LmluZGV4T2YoJzxpbWcgJykgPiAtMSkge1xuICAgICAgICAgICAgbmV3cy5pbWFnZSA9ICQobmV3cy5jb250ZW50KS5maW5kKCdpbWc6Zmlyc3QtY2hpbGQnKS5hdHRyKCdzcmMnKTtcbiAgICAgICAgfVxuICAgICAgICBuZXdzLmltYWdlID0gKG5ld3MuaW1hZ2UpID8gYDxpbWcgc3JjPVwiJHtuZXdzLmltYWdlLnJlcGxhY2UobmV3IFJlZ0V4cCgnL3MxNDYvJywgJ2cnKSwgJy9zNDQwLycpfVwiIC8+YCA6ICcnO1xuXG4gICAgICAgIG5ld3MudGltZSA9IG5ld3MudGltZSB8fCBuZXdzLnB1Ymxpc2hlZERhdGUgfHwgbmV3cy5wdWJEYXRlIHx8ICcnO1xuICAgICAgICBuZXdzLmxpbmsgPSBuZXdzLmxpbmsgfHwgbmV3cy51cmw7XG4gICAgICAgIG5ld3Muc291cmNlVGV4dCA9IG5ld3Muc291cmNlID8gJyAtICcgKyBuZXdzLnNvdXJjZS50ZXh0IDogJyc7XG4gICAgICAgIHJldHVybiBgPGRpdiBjbGFzcz0nbmV3cy1pdGVtIG1kbC1jb2xvci10ZXh0LS1ncmV5LTcwMCBtZGwtc2hhZG93LS0yZHAnPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSduZXdzLWl0ZW1fX3RpdGxlJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9J25ld3MtaXRlbV9fdGl0bGUtdGV4dCBtZGwtdHlwb2dyYXBoeS0tdGl0bGUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtuZXdzLnRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSduZXdzLWl0ZW1fX3RpdGxlLXRpbWUnPiR7bmV3cy50aW1lfSA8Yj4ke25ld3Muc291cmNlVGV4dH08L2I+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSduZXdzLWl0ZW1fX2NvbnRlbnQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgJHtuZXdzLmltYWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgJHtuZXdzLnN1bW1hcnl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSduZXdzLWl0ZW1fX2FjdGlvbnMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLWxpbms9JyR7bmV3cy5saW5rfScgY2xhc3M9J21kbC1idXR0b24gbWRsLWJ1dHRvbi0tY29sb3JlZCBtZGwtanMtYnV0dG9uIG1kbC1qcy1yaXBwbGUtZWZmZWN0IHNpbXBsZS1hamF4LXBvcHVwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgVmlldyBtb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9JyR7bmV3cy5saW5rfScgdGFyZ2V0PSdfYmxhbmsnIGNsYXNzPSdtZGwtYnV0dG9uIG1kbC1idXR0b24tLWNvbG9yZWQgbWRsLWpzLWJ1dHRvbiBtZGwtanMtcmlwcGxlLWVmZmVjdCBzaW1wbGUtYWpheC1wb3B1cCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIE9wZW4gd2ViXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PmBcbiAgICB9XG5cbiAgICAkKCcuY2hhbmdlLW5ld3MnKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgIGxvYWROZXdzKCQodGhpcykuZGF0YSgndHlwZScpLCAkKHRoaXMpLmRhdGEoJ3VybCcpKTtcbiAgICAgICAgJChcIi5tZGwtbGF5b3V0X19vYmZ1c2NhdG9yXCIpLmNsaWNrKCk7XG4gICAgfSk7XG4gICAgJCgnLmNoYW5nZS1uZXdzOmZpcnN0LWNoaWxkJykuY2xpY2soKTtcblxuICAgIC8vIFBMVUdJTiBtZGwtanF1ZXJ5LW1vZGFsLWRpYWxvZy5qc1xuICAgIGZ1bmN0aW9uIHNob3dMb2FkaW5nKCkge1xuICAgICAgICAvLyByZW1vdmUgZXhpc3RpbmcgbG9hZGVyc1xuICAgICAgICAkKCcubG9hZGluZy1jb250YWluZXInKS5yZW1vdmUoKTtcbiAgICAgICAgJCgnPGRpdiBpZD1cIm9ycnNMb2FkZXJcIiBjbGFzcz1cImxvYWRpbmctY29udGFpbmVyXCI+PGRpdj48ZGl2IGNsYXNzPVwibWRsLXNwaW5uZXIgbWRsLWpzLXNwaW5uZXIgaXMtYWN0aXZlXCI+PC9kaXY+PC9kaXY+PC9kaXY+JykuYXBwZW5kVG8oXCJib2R5XCIpO1xuXG4gICAgICAgIGNvbXBvbmVudEhhbmRsZXIudXBncmFkZUVsZW1lbnRzKCQoJy5tZGwtc3Bpbm5lcicpLmdldCgpKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJyNvcnJzTG9hZGVyJykuY3NzKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGlkZUxvYWRpbmcoKSB7XG4gICAgICAgICQoJyNvcnJzTG9hZGVyJykuY3NzKHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgfSk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcjb3Jyc0xvYWRlcicpLnJlbW92ZSgpO1xuICAgICAgICB9LCA0MDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dEaWFsb2cob3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gJC5leHRlbmQoe1xuICAgICAgICAgICAgaWQ6ICdvcnJzRGlhZycsXG4gICAgICAgICAgICB0aXRsZTogbnVsbCxcbiAgICAgICAgICAgIHRleHQ6IG51bGwsXG4gICAgICAgICAgICBuZWdhdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICBwb3NpdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29udGVudFN0eWxlOiBudWxsLFxuICAgICAgICAgICAgb25Mb2FkZWQ6IGZhbHNlXG4gICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vIHJlbW92ZSBleGlzdGluZyBkaWFsb2dzXG4gICAgICAgICQoJy5kaWFsb2ctY29udGFpbmVyJykucmVtb3ZlKCk7XG4gICAgICAgICQoZG9jdW1lbnQpLnVuYmluZChcImtleXVwLmRpYWxvZ1wiKTtcblxuICAgICAgICAkKCc8ZGl2IGlkPVwiJyArIG9wdGlvbnMuaWQgKyAnXCIgY2xhc3M9XCJkaWFsb2ctY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cIm1kbC1jYXJkIG1kbC1zaGFkb3ctLTE2ZHBcIj48L2Rpdj48L2Rpdj4nKS5hcHBlbmRUbyhcImJvZHlcIik7XG4gICAgICAgIHZhciBkaWFsb2cgPSAkKCcjb3Jyc0RpYWcnKTtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBkaWFsb2cuZmluZCgnLm1kbC1jYXJkJyk7XG4gICAgICAgIGlmIChvcHRpb25zLmNvbnRlbnRTdHlsZSAhPSBudWxsKSBjb250ZW50LmNzcyhvcHRpb25zLmNvbnRlbnRTdHlsZSk7XG4gICAgICAgIGlmIChvcHRpb25zLnRpdGxlICE9IG51bGwpIHtcbiAgICAgICAgICAgICQoJzxoNT4nICsgb3B0aW9ucy50aXRsZSArICc8L2g1PicpLmFwcGVuZFRvKGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnRleHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgJCgnPHA+JyArIG9wdGlvbnMudGV4dCArICc8L3A+JykuYXBwZW5kVG8oY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMubmVnYXRpdmUgfHwgb3B0aW9ucy5wb3NpdGl2ZSkge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbkJhciA9ICQoJzxkaXYgY2xhc3M9XCJtZGwtY2FyZF9fYWN0aW9ucyBkaWFsb2ctYnV0dG9uLWJhclwiPjwvZGl2PicpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMubmVnYXRpdmUpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLm5lZ2F0aXZlID0gJC5leHRlbmQoe1xuICAgICAgICAgICAgICAgICAgICBpZDogJ25lZ2F0aXZlJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMubmVnYXRpdmUpO1xuICAgICAgICAgICAgICAgIHZhciBuZWdCdXR0b24gPSAkKCc8YnV0dG9uIGNsYXNzPVwibWRsLWJ1dHRvbiBtZGwtanMtYnV0dG9uIG1kbC1qcy1yaXBwbGUtZWZmZWN0XCIgaWQ9XCInICsgb3B0aW9ucy5uZWdhdGl2ZS5pZCArICdcIj4nICsgb3B0aW9ucy5uZWdhdGl2ZS50aXRsZSArICc8L2J1dHRvbj4nKTtcbiAgICAgICAgICAgICAgICBuZWdCdXR0b24uY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5uZWdhdGl2ZS5vbkNsaWNrKGUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZURpYWxvZyhkaWFsb2cpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbmVnQnV0dG9uLmFwcGVuZFRvKGJ1dHRvbkJhcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wb3NpdGl2ZSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMucG9zaXRpdmUgPSAkLmV4dGVuZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAncG9zaXRpdmUnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ09LJyxcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBvcHRpb25zLnBvc2l0aXZlKTtcbiAgICAgICAgICAgICAgICB2YXIgcG9zQnV0dG9uID0gJCgnPGJ1dHRvbiBjbGFzcz1cIm1kbC1idXR0b24gbWRsLWJ1dHRvbi0tY29sb3JlZCBtZGwtanMtYnV0dG9uIG1kbC1qcy1yaXBwbGUtZWZmZWN0XCIgaWQ9XCInICsgb3B0aW9ucy5wb3NpdGl2ZS5pZCArICdcIj4nICsgb3B0aW9ucy5wb3NpdGl2ZS50aXRsZSArICc8L2J1dHRvbj4nKTtcbiAgICAgICAgICAgICAgICBwb3NCdXR0b24uY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5wb3NpdGl2ZS5vbkNsaWNrKGUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZURpYWxvZyhkaWFsb2cpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcG9zQnV0dG9uLmFwcGVuZFRvKGJ1dHRvbkJhcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidXR0b25CYXIuYXBwZW5kVG8oY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgY29tcG9uZW50SGFuZGxlci51cGdyYWRlRG9tKCk7XG4gICAgICAgIGlmIChvcHRpb25zLmNhbmNlbGFibGUpIHtcbiAgICAgICAgICAgIGRpYWxvZy5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBoaWRlRGlhbG9nKGRpYWxvZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLmJpbmQoXCJrZXl1cC5kaWFsb2dcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLndoaWNoID09IDI3KVxuICAgICAgICAgICAgICAgICAgICBoaWRlRGlhbG9nKGRpYWxvZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRlbnQuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZGlhbG9nLmNzcyh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5vbkxvYWRlZClcbiAgICAgICAgICAgICAgICBvcHRpb25zLm9uTG9hZGVkKCk7XG4gICAgICAgIH0sIDEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhpZGVEaWFsb2coZGlhbG9nKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLnVuYmluZChcImtleXVwLmRpYWxvZ1wiKTtcbiAgICAgICAgZGlhbG9nLmNzcyh7XG4gICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgIH0pO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZGlhbG9nLnJlbW92ZSgpO1xuICAgICAgICB9LCA0MDApO1xuICAgIH1cbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=\n","/* eslint-env browser */\n\n(function() {\n    'use strict';\n\n    // Check to make sure service workers are supported in the current browser,\n    // and that the current page is accessed from a secure origin. Using a\n    // service worker from an insecure origin will trigger JS console errors. See\n    // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n    var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.1/8 is considered localhost for IPv4.\n        window.location.hostname.match(\n            /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n        )\n    );\n\n    if ('serviceWorker' in navigator &&\n        (window.location.protocol === 'https:' || isLocalhost)) {\n        navigator.serviceWorker.register('service-worker.js')\n            .then(function(registration) {\n                // Check to see if there's an updated version of service-worker.js with\n                // new files to cache:\n                // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-registration-update-method\n                if (typeof registration.update === 'function') {\n                    registration.update();\n                }\n\n                // updatefound is fired if service-worker.js changes.\n                registration.onupdatefound = function() {\n                    // updatefound is also fired the very first time the SW is installed,\n                    // and there's no need to prompt for a reload at that point.\n                    // So check here to see if the page is already controlled,\n                    // i.e. whether there's an existing service worker.\n                    if (navigator.serviceWorker.controller) {\n                        // The updatefound event implies that registration.installing is set:\n                        // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n                        var installingWorker = registration.installing;\n\n                        installingWorker.onstatechange = function() {\n                            switch (installingWorker.state) {\n                                case 'installed':\n                                    // At this point, the old content will have been purged and the\n                                    // fresh content will have been added to the cache.\n                                    // It's the perfect time to display a 'New content is\n                                    // available; please refresh.' message in the page's interface.\n                                    break;\n\n                                case 'redundant':\n                                    throw new Error('The installing ' +\n                                        'service worker became redundant.');\n\n                                default:\n                                    // Ignore\n                            }\n                        };\n                    }\n                };\n            }).catch(function(e) {\n                console.error('Error during service worker registration:', e);\n            });\n    }\n\n    // Your custom JavaScript goes here\n\n    // var rss_tuoitre = 'http://tuoitre.vn/rss/tt-tin-moi-nhat.rss';\n    // var rss_vnexpress = 'http://vnexpress.net/rss/tin-moi-nhat.rss';\n    var rssReader = 'yql';\n\n    function urlBuilder(type, url) {\n        if (type === \"rss\") {\n            if (rssReader === 'google') {\n                return 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=20&q=' + url;\n            } else if (rssReader === 'yql') {\n                return 'https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20rss%20where%20url%3D%22' + url + '%22&format=json';\n            }\n        } else {\n            return url;\n        }\n    }\n\n    var displayDiv = document.getElementById('mainContent');\n\n    // Part 1 - Create a function that returns a promise\n    function getJsonAsync(url) {\n        // Promises require two functions: one for success, one for failure\n        return new Promise(function(resolve, reject) {\n            var xhr = new XMLHttpRequest();\n            xhr.open('GET', url);\n            xhr.onload = () => {\n                if (xhr.readyState == 4 && xhr.status === 200) {\n                    // We can resolve the promise\n                    resolve(xhr.response);\n                } else {\n                    // It's a failure, so let's reject the promise\n                    reject('Unable to load RSS');\n                }\n            }\n            xhr.onerror = () => {\n                // It's a failure, so let's reject the promise\n                reject('Unable to load RSS');\n            };\n            xhr.send();\n        });\n    }\n\n    function getNewsDetail(type, link, callback) {\n        if (type === \"json\") {\n            callback(news[link]);\n            return;\n        }\n\n        // get news detail by using rest api which are created by import.io\n        showLoading();\n        var connector = 'e920a944-d799-4ed7-a017-322eb25ace70';\n        if (link.indexOf('tuoitre.vn') > -1) {\n            connector = 'bdf72c89-c94b-48f4-967b-b5bc3f8288f7';\n        } else if (link.indexOf('vnexpress.net') > -1 || link.indexOf('gamethu.net') > -1) {\n            connector = 'e920a944-d799-4ed7-a017-322eb25ace70';\n        }\n\n        $.ajax({\n            url: 'https://api.import.io/store/connector/' + connector + '/_query',\n            data: {\n                input: 'webpage/url:' + link,\n                _apikey: '59531d5e38004cbd944872b657c479fb6eb8a951555700c13023482aad713db52a65da670cd35dbe42a8fc32301bb78f419cba619c4c1c2e66ecde01de25b90dc014dece32953d8ad7c9de7ad788a261'\n            },\n            success: function(response) {\n                callback(response.results[0]);\n            },\n            error: function(error) {\n                showDialog({\n                    title: 'Error',\n                    text: error\n                })\n            },\n            complete: function() {\n                hideLoading();\n            }\n        });\n    }\n\n    var news = [];\n\n    function loadNews(type, url) {\n        showLoading();\n        url = urlBuilder(type, url);\n        var promise = $.ajax({\n            url: url,\n            // crossDomain: true,\n            // dataType: \"jsonp\"\n        });\n        promise.done(function(response) {\n            displayDiv.innerHTML = '';\n            if (type === \"rss\") {\n                if (rssReader === 'google') {\n                    if (response.responseData.feed) {\n                        news = response.responseData.feed.entries;\n                    } else {\n                        news = response.query.results.item;\n                    }\n                } else if (rssReader === 'yql') {\n                    news = response.query.results.item;\n                }\n            } else if (type === \"json\") {\n                news = response.results.results || response.results.items || response.results.collection1;\n            }\n            news.forEach(item => {\n                displayDiv.innerHTML += getTemplateNews(item);\n            });\n\n            $('button.simple-ajax-popup').on('click', function(e) {\n                e.preventDefault();\n                var link = $(this).data('link');\n                console.log(link);\n                if (!link) {\n                    showDialog({\n                        title: 'no link',\n                        text: link\n                    })\n                    return;\n                }\n                if (type === \"json\") {\n                    link = $(this).parents('.news-item').index();\n                };\n                getNewsDetail(type, link, function(detail) {\n                    var content_html = detail.content_html || detail.content;\n                    var $content = $('<div>'+content_html+'</div');\n                    $content.find('.nocontent').remove();\n                    // var $content = $(content_html).siblings(\".nocontent\").remove();\n                    showDialog({\n                        title: detail.title,\n                        text: $content.html()\n                    })\n                })\n            });\n        }).complete(function() {\n            hideLoading();\n        });\n    }\n\n    function getTemplateNews(news) {\n        if (!news.content) {\n            news.content = news.description || \"\";\n        }\n        news.content = news.content.replace(new RegExp('/s146/', 'g'), '/s440/');\n        news.summary = news.summary || news.content;\n        if (!news.image && news.summary.indexOf('<img ') === -1 && news.content.indexOf('<img ') > -1) {\n            news.image = $(news.content).find('img:first-child').attr('src');\n        }\n        news.image = (news.image) ? `<img src=\"${news.image.replace(new RegExp('/s146/', 'g'), '/s440/')}\" />` : '';\n\n        news.time = news.time || news.publishedDate || news.pubDate || '';\n        news.link = news.link || news.url;\n        news.sourceText = news.source ? ' - ' + news.source.text : '';\n        return `<div class='news-item mdl-color-text--grey-700 mdl-shadow--2dp'>\n                    <div class='news-item__title'>\n                        <div class='news-item__title-text mdl-typography--title'>\n                           ${news.title}\n                        </div>\n                        <div class='news-item__title-time'>${news.time} <b>${news.sourceText}</b></div>\n                    </div>\n                    <div class='news-item__content'>\n                        ${news.image}\n                        ${news.summary}\n                    </div>\n                    <div class='news-item__actions'>\n                        <button data-link='${news.link}' class='mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect simple-ajax-popup'>\n                          View more\n                        </button>\n                        <a href='${news.link}' target='_blank' class='mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect simple-ajax-popup'>\n                          Open web\n                        </a>\n                    </div>\n                </div>`\n    }\n\n    $('.change-news').click(function(e) {\n        loadNews($(this).data('type'), $(this).data('url'));\n        $(\".mdl-layout__obfuscator\").click();\n    });\n    $('.change-news:first-child').click();\n\n    // PLUGIN mdl-jquery-modal-dialog.js\n    function showLoading() {\n        // remove existing loaders\n        $('.loading-container').remove();\n        $('<div id=\"orrsLoader\" class=\"loading-container\"><div><div class=\"mdl-spinner mdl-js-spinner is-active\"></div></div></div>').appendTo(\"body\");\n\n        componentHandler.upgradeElements($('.mdl-spinner').get());\n        setTimeout(function() {\n            $('#orrsLoader').css({\n                opacity: 1\n            });\n        }, 1);\n    }\n\n    function hideLoading() {\n        $('#orrsLoader').css({\n            opacity: 0\n        });\n        setTimeout(function() {\n            $('#orrsLoader').remove();\n        }, 400);\n    }\n\n    function showDialog(options) {\n        options = $.extend({\n            id: 'orrsDiag',\n            title: null,\n            text: null,\n            negative: false,\n            positive: false,\n            cancelable: true,\n            contentStyle: null,\n            onLoaded: false\n        }, options);\n\n        // remove existing dialogs\n        $('.dialog-container').remove();\n        $(document).unbind(\"keyup.dialog\");\n\n        $('<div id=\"' + options.id + '\" class=\"dialog-container\"><div class=\"mdl-card mdl-shadow--16dp\"></div></div>').appendTo(\"body\");\n        var dialog = $('#orrsDiag');\n        var content = dialog.find('.mdl-card');\n        if (options.contentStyle != null) content.css(options.contentStyle);\n        if (options.title != null) {\n            $('<h5>' + options.title + '</h5>').appendTo(content);\n        }\n        if (options.text != null) {\n            $('<p>' + options.text + '</p>').appendTo(content);\n        }\n        if (options.negative || options.positive) {\n            var buttonBar = $('<div class=\"mdl-card__actions dialog-button-bar\"></div>');\n            if (options.negative) {\n                options.negative = $.extend({\n                    id: 'negative',\n                    title: 'Cancel',\n                    onClick: function() {\n                        return false;\n                    }\n                }, options.negative);\n                var negButton = $('<button class=\"mdl-button mdl-js-button mdl-js-ripple-effect\" id=\"' + options.negative.id + '\">' + options.negative.title + '</button>');\n                negButton.click(function(e) {\n                    e.preventDefault();\n                    if (!options.negative.onClick(e))\n                        hideDialog(dialog)\n                });\n                negButton.appendTo(buttonBar);\n            }\n            if (options.positive) {\n                options.positive = $.extend({\n                    id: 'positive',\n                    title: 'OK',\n                    onClick: function() {\n                        return false;\n                    }\n                }, options.positive);\n                var posButton = $('<button class=\"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\" id=\"' + options.positive.id + '\">' + options.positive.title + '</button>');\n                posButton.click(function(e) {\n                    e.preventDefault();\n                    if (!options.positive.onClick(e))\n                        hideDialog(dialog)\n                });\n                posButton.appendTo(buttonBar);\n            }\n            buttonBar.appendTo(content);\n        }\n        componentHandler.upgradeDom();\n        if (options.cancelable) {\n            dialog.click(function() {\n                hideDialog(dialog);\n            });\n            $(document).bind(\"keyup.dialog\", function(e) {\n                if (e.which == 27)\n                    hideDialog(dialog);\n            });\n            content.click(function(e) {\n                e.stopPropagation();\n            });\n        }\n        setTimeout(function() {\n            dialog.css({\n                opacity: 1\n            });\n            if (options.onLoaded)\n                options.onLoaded();\n        }, 1);\n    }\n\n    function hideDialog(dialog) {\n        $(document).unbind(\"keyup.dialog\");\n        dialog.css({\n            opacity: 0\n        });\n        setTimeout(function() {\n            dialog.remove();\n        }, 400);\n    }\n})();\n"],"sourceRoot":"/source/"}