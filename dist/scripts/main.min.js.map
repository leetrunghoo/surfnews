{"version":3,"sources":["main.min.js","/source/main.js"],"names":["urlBuilder","type","url","rssReader","getNewsDetail","link","callback","news","showLoading","connector","indexOf","$","ajax","data","input","_apikey","success","response","results","error","_error","showDialog","title","text","complete","hideLoading","loadNews","promise","done","displayDiv","innerHTML","responseData","feed","entries","query","item","items","collection1","forEach","getTemplateNews","on","e","preventDefault","this","console","log","parents","index","detail","content_html","content","isChrome","replace","RegExp","$content","find","remove","html","description","summary","image","attr","time","publishedDate","pubDate","sourceText","source","appendTo","componentHandler","upgradeElements","get","setTimeout","css","opacity","options","extend","id","negative","positive","cancelable","contentStyle","onLoaded","document","unbind","dialog","buttonBar","onClick","negButton","click","hideDialog","posButton","upgradeDom","bind","which","stopPropagation","isLocalhost","Boolean","window","location","hostname","match","navigator","protocol","serviceWorker","register","then","registration","update","onupdatefound","controller","installingWorker","installing","onstatechange","state","Error","test","userAgent","vendor","getElementById"],"mappings":"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","file":"main.min.js","sourcesContent":["'use strict'; /* eslint-env browser */\n\n(function () {\n    'use strict';\n\n    // Check to make sure service workers are supported in the current browser,\n    // and that the current page is accessed from a secure origin. Using a\n    // service worker from an insecure origin will trigger JS console errors. See\n    // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n    var isLocalhost = Boolean(window.location.hostname === 'localhost' || \n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' || \n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));\n\n\n\n    if ('serviceWorker' in navigator && (\n    window.location.protocol === 'https:' || isLocalhost)) {\n        navigator.serviceWorker.register('service-worker.js').\n        then(function (registration) {\n            // Check to see if there's an updated version of service-worker.js with\n            // new files to cache:\n            // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-registration-update-method\n            if (typeof registration.update === 'function') {\n                registration.update();}\n\n\n            // updatefound is fired if service-worker.js changes.\n            registration.onupdatefound = function () {\n                // updatefound is also fired the very first time the SW is installed,\n                // and there's no need to prompt for a reload at that point.\n                // So check here to see if the page is already controlled,\n                // i.e. whether there's an existing service worker.\n                if (navigator.serviceWorker.controller) {\n                    // The updatefound event implies that registration.installing is set:\n                    // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n                    var installingWorker = registration.installing;\n\n                    installingWorker.onstatechange = function () {\n                        switch (installingWorker.state) {\n                            case 'installed':\n                                // At this point, the old content will have been purged and the\n                                // fresh content will have been added to the cache.\n                                // It's the perfect time to display a 'New content is\n                                // available; please refresh.' message in the page's interface.\n                                break;\n\n                            case 'redundant':\n                                throw new Error('The installing ' + \n                                'service worker became redundant.');\n\n                            default:\n                            // Ignore\n                        }};}};}).\n\n\n\n        catch(function (e) {\n            console.error('Error during service worker registration:', e);});}\n\n\n\n    // Your custom JavaScript goes here\n\n    // var rss_tuoitre = 'http://tuoitre.vn/rss/tt-tin-moi-nhat.rss';\n    // var rss_vnexpress = 'http://vnexpress.net/rss/tin-moi-nhat.rss';\n    var rssReader = 'yql';\n    var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n\n    function urlBuilder(type, url) {\n        if (type === \"rss\") {\n            if (rssReader === 'google') {\n                return 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=20&q=' + url;} else \n            if (rssReader === 'yql') {\n                return 'https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20rss%20where%20url%3D%22' + url + '%22&format=json';}} else \n\n        {\n            return url;}}\n\n\n\n    var displayDiv = document.getElementById('mainContent');\n\n    // Part 1 - Create a function that returns a promise\n    function getJsonAsync(url) {\n        // Promises require two functions: one for success, one for failure\n        return new Promise(function (resolve, reject) {\n            var xhr = new XMLHttpRequest();\n            xhr.open('GET', url);\n            xhr.onload = function () {\n                if (xhr.readyState == 4 && xhr.status === 200) {\n                    // We can resolve the promise\n                    resolve(xhr.response);} else \n                {\n                    // It's a failure, so let's reject the promise\n                    reject('Unable to load RSS');}};\n\n\n            xhr.onerror = function () {\n                // It's a failure, so let's reject the promise\n                reject('Unable to load RSS');};\n\n            xhr.send();});}\n\n\n\n    function getNewsDetail(type, link, callback) {\n        if (type === \"json\") {\n            callback(news[link]);\n            return;}\n\n\n        // get news detail by using rest api which are created by import.io\n        showLoading();\n        var connector = 'e920a944-d799-4ed7-a017-322eb25ace70';\n        if (link.indexOf('tuoitre.vn') > -1) {\n            connector = 'bdf72c89-c94b-48f4-967b-b5bc3f8288f7';} else \n        if (link.indexOf('vnexpress.net') > -1 || link.indexOf('gamethu.net') > -1) {\n            connector = 'e920a944-d799-4ed7-a017-322eb25ace70';}\n\n\n        $.ajax({ \n            url: 'https://api.import.io/store/connector/' + connector + '/_query', \n            data: { \n                input: 'webpage/url:' + link, \n                _apikey: '59531d5e38004cbd944872b657c479fb6eb8a951555700c13023482aad713db52a65da670cd35dbe42a8fc32301bb78f419cba619c4c1c2e66ecde01de25b90dc014dece32953d8ad7c9de7ad788a261' }, \n\n            success: function success(response) {\n                callback(response.results[0]);}, \n\n            error: function error(_error) {\n                showDialog({ \n                    title: 'Error', \n                    text: _error });}, \n\n\n            complete: function complete() {\n                hideLoading();} });}\n\n\n\n\n    var news = [];\n\n    function loadNews(type, url) {\n        showLoading();\n        url = urlBuilder(type, url);\n        var promise = $.ajax({ \n            url: url });\n        // crossDomain: true,\n        // dataType: \"jsonp\"\n\n        promise.done(function (response) {\n            displayDiv.innerHTML = '';\n            if (type === \"rss\") {\n                if (rssReader === 'google') {\n                    if (response.responseData.feed) {\n                        news = response.responseData.feed.entries;} else \n                    {\n                        news = response.query.results.item;}} else \n\n                if (rssReader === 'yql') {\n                    news = response.query.results.item;}} else \n\n            if (type === \"json\") {\n                news = response.results.results || response.results.items || response.results.collection1;}\n\n            news.forEach(function (item) {\n                displayDiv.innerHTML += getTemplateNews(item);});\n\n\n            $('button.simple-ajax-popup').on('click', function (e) {\n                e.preventDefault();\n                var link = $(this).data('link');\n                console.log(link);\n                if (!link) {\n                    showDialog({ \n                        title: 'no link', \n                        text: link });\n\n                    return;}\n\n                if (type === \"json\") {\n                    link = $(this).parents('.news-item').index();}\n                ;\n                getNewsDetail(type, link, function (detail) {\n                    var content_html = detail.content_html || detail.content;\n                    if (!isChrome) {\n                        content_html = content_html.replace(new RegExp('.webp', 'g'), '');}\n\n                    var $content = $('<div>' + content_html + '</div');\n                    $content.find('.nocontent').remove();\n                    // var $content = $(content_html).siblings(\".nocontent\").remove();\n                    showDialog({ \n                        title: detail.title, \n                        text: $content.html() });});});}).\n\n\n\n        complete(function () {\n            hideLoading();});}\n\n\n\n    function getTemplateNews(news) {\n        if (!news.content) {\n            news.content = news.description || \"\";}\n\n        news.content = news.content.replace(new RegExp('/s146/', 'g'), '/s440/');\n        news.summary = news.summary || news.content;\n        if (!news.image && news.summary.indexOf('<img ') === -1 && news.content.indexOf('<img ') > -1) {\n            news.image = $(news.content).find('img:first-child').attr('src');}\n\n        news.image = news.image ? '<img src=\"' + news.image.replace(new RegExp('/s146/', 'g'), '/s440/') + '\" />' : '';\n        if (!isChrome) {\n            news.image = news.image.replace(new RegExp('.webp', 'g'), '');}\n\n\n        news.time = news.time || news.publishedDate || news.pubDate || '';\n        news.link = news.link || news.url;\n        news.sourceText = news.source ? ' - ' + news.source.text : '';\n        return '<div class=\\'news-item mdl-color-text--grey-700 mdl-shadow--2dp\\'>\\n                    <div class=\\'news-item__title\\'>\\n                        <div class=\\'news-item__title-text mdl-typography--title\\'>\\n                           ' + \n\n\n        news.title + '\\n                        </div>\\n                        <div class=\\'news-item__title-time\\'>' + \n\n        news.time + ' <b>' + news.sourceText + '</b></div>\\n                    </div>\\n                    <div class=\\'news-item__content\\'>\\n                        ' + \n\n\n        news.image + '\\n                        ' + \n        news.summary + '\\n                    </div>\\n                    <div class=\\'news-item__actions\\'>\\n                        <button data-link=\\'' + \n\n\n        news.link + '\\' class=\\'mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect simple-ajax-popup\\'>\\n                          View more\\n                        </button>\\n                        <a href=\\'' + \n\n\n        news.link + '\\' target=\\'_blank\\' class=\\'mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect simple-ajax-popup\\'>\\n                          Open web\\n                        </a>\\n                    </div>\\n                </div>';}\n\n\n\n\n\n\n    $('.change-news').click(function (e) {\n        loadNews($(this).data('type'), $(this).data('url'));\n        $(\".mdl-layout__obfuscator\").click();});\n\n    $('.change-news:first-child').click();\n\n    // PLUGIN mdl-jquery-modal-dialog.js\n    function showLoading() {\n        // remove existing loaders\n        $('.loading-container').remove();\n        $('<div id=\"orrsLoader\" class=\"loading-container\"><div><div class=\"mdl-spinner mdl-js-spinner is-active\"></div></div></div>').appendTo(\"body\");\n\n        componentHandler.upgradeElements($('.mdl-spinner').get());\n        setTimeout(function () {\n            $('#orrsLoader').css({ \n                opacity: 1 });}, \n\n        1);}\n\n\n    function hideLoading() {\n        $('#orrsLoader').css({ \n            opacity: 0 });\n\n        setTimeout(function () {\n            $('#orrsLoader').remove();}, \n        400);}\n\n\n    function showDialog(options) {\n        options = $.extend({ \n            id: 'orrsDiag', \n            title: null, \n            text: null, \n            negative: false, \n            positive: false, \n            cancelable: true, \n            contentStyle: null, \n            onLoaded: false }, \n        options);\n\n        // remove existing dialogs\n        $('.dialog-container').remove();\n        $(document).unbind(\"keyup.dialog\");\n\n        $('<div id=\"' + options.id + '\" class=\"dialog-container\"><div class=\"mdl-card mdl-shadow--16dp\"></div></div>').appendTo(\"body\");\n        var dialog = $('#orrsDiag');\n        var content = dialog.find('.mdl-card');\n        if (options.contentStyle != null) content.css(options.contentStyle);\n        if (options.title != null) {\n            $('<h5>' + options.title + '</h5>').appendTo(content);}\n\n        if (options.text != null) {\n            $('<p>' + options.text + '</p>').appendTo(content);}\n\n        if (options.negative || options.positive) {\n            var buttonBar = $('<div class=\"mdl-card__actions dialog-button-bar\"></div>');\n            if (options.negative) {\n                options.negative = $.extend({ \n                    id: 'negative', \n                    title: 'Cancel', \n                    onClick: function onClick() {\n                        return false;} }, \n\n                options.negative);\n                var negButton = $('<button class=\"mdl-button mdl-js-button mdl-js-ripple-effect\" id=\"' + options.negative.id + '\">' + options.negative.title + '</button>');\n                negButton.click(function (e) {\n                    e.preventDefault();\n                    if (!options.negative.onClick(e)) \n                    hideDialog(dialog);});\n\n                negButton.appendTo(buttonBar);}\n\n            if (options.positive) {\n                options.positive = $.extend({ \n                    id: 'positive', \n                    title: 'OK', \n                    onClick: function onClick() {\n                        return false;} }, \n\n                options.positive);\n                var posButton = $('<button class=\"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\" id=\"' + options.positive.id + '\">' + options.positive.title + '</button>');\n                posButton.click(function (e) {\n                    e.preventDefault();\n                    if (!options.positive.onClick(e)) \n                    hideDialog(dialog);});\n\n                posButton.appendTo(buttonBar);}\n\n            buttonBar.appendTo(content);}\n\n        componentHandler.upgradeDom();\n        if (options.cancelable) {\n            dialog.click(function () {\n                hideDialog(dialog);});\n\n            $(document).bind(\"keyup.dialog\", function (e) {\n                if (e.which == 27) \n                hideDialog(dialog);});\n\n            content.click(function (e) {\n                e.stopPropagation();});}\n\n\n        setTimeout(function () {\n            dialog.css({ \n                opacity: 1 });\n\n            if (options.onLoaded) \n            options.onLoaded();}, \n        1);}\n\n\n    function hideDialog(dialog) {\n        $(document).unbind(\"keyup.dialog\");\n        dialog.css({ \n            opacity: 0 });\n\n        setTimeout(function () {\n            dialog.remove();}, \n        400);}})();\n//# sourceMappingURL=data:application/json;base64,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QWpCLEVBQWlDLFVBQVMsQ0FBVCxFQUFZO0FBQ3pDLG9CQUFJLEVBQUUsS0FBRixJQUFXLEVBQVg7QUFDQSwyQkFBVyxNQUFYLEVBREosQ0FENkIsQ0FBakMsQ0FKb0I7O0FBUXBCLG9CQUFRLEtBQVIsQ0FBYyxVQUFTLENBQVQsRUFBWTtBQUN0QixrQkFBRSxlQUFGLEdBRHNCLENBQVosQ0FBZCxDQVJvQixDQUF4Qjs7O0FBWUEsbUJBQVcsWUFBVztBQUNsQixtQkFBTyxHQUFQLENBQVc7QUFDUCx5QkFBUyxDQUFULEVBREosRUFEa0I7O0FBSWxCLGdCQUFJLFFBQVEsUUFBUjtBQUNBLG9CQUFRLFFBQVIsR0FESixDQUpPO0FBTVIsU0FOSCxFQTNFeUIsQ0FBN0I7OztBQW9GQSxhQUFTLFVBQVQsQ0FBb0IsTUFBcEIsRUFBNEI7QUFDeEIsVUFBRSxRQUFGLEVBQVksTUFBWixDQUFtQixjQUFuQixFQUR3QjtBQUV4QixlQUFPLEdBQVAsQ0FBVztBQUNQLHFCQUFTLENBQVQsRUFESixFQUZ3Qjs7QUFLeEIsbUJBQVcsWUFBVztBQUNsQixtQkFBTyxNQUFQLEdBRGtCLENBQVg7QUFFUixXQUZILEVBTHdCLENBQTVCLENBcFdILENBQUQiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gQ2hlY2sgdG8gbWFrZSBzdXJlIHNlcnZpY2Ugd29ya2VycyBhcmUgc3VwcG9ydGVkIGluIHRoZSBjdXJyZW50IGJyb3dzZXIsXG4gICAgLy8gYW5kIHRoYXQgdGhlIGN1cnJlbnQgcGFnZSBpcyBhY2Nlc3NlZCBmcm9tIGEgc2VjdXJlIG9yaWdpbi4gVXNpbmcgYVxuICAgIC8vIHNlcnZpY2Ugd29ya2VyIGZyb20gYW4gaW5zZWN1cmUgb3JpZ2luIHdpbGwgdHJpZ2dlciBKUyBjb25zb2xlIGVycm9ycy4gU2VlXG4gICAgLy8gaHR0cDovL3d3dy5jaHJvbWl1bS5vcmcvSG9tZS9jaHJvbWl1bS1zZWN1cml0eS9wcmVmZXItc2VjdXJlLW9yaWdpbnMtZm9yLXBvd2VyZnVsLW5ldy1mZWF0dXJlc1xuICAgIHZhciBpc0xvY2FsaG9zdCA9IEJvb2xlYW4od2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSAnbG9jYWxob3N0JyB8fFxuICAgICAgICAvLyBbOjoxXSBpcyB0aGUgSVB2NiBsb2NhbGhvc3QgYWRkcmVzcy5cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSAnWzo6MV0nIHx8XG4gICAgICAgIC8vIDEyNy4wLjAuMS84IGlzIGNvbnNpZGVyZWQgbG9jYWxob3N0IGZvciBJUHY0LlxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUubWF0Y2goXG4gICAgICAgICAgICAvXjEyNyg/OlxcLig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPykpezN9JC9cbiAgICAgICAgKVxuICAgICk7XG5cbiAgICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvciAmJlxuICAgICAgICAod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyB8fCBpc0xvY2FsaG9zdCkpIHtcbiAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJ3NlcnZpY2Utd29ya2VyLmpzJylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlZ2lzdHJhdGlvbikge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGVyZSdzIGFuIHVwZGF0ZWQgdmVyc2lvbiBvZiBzZXJ2aWNlLXdvcmtlci5qcyB3aXRoXG4gICAgICAgICAgICAgICAgLy8gbmV3IGZpbGVzIHRvIGNhY2hlOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vc2xpZ2h0bHlvZmYuZ2l0aHViLmlvL1NlcnZpY2VXb3JrZXIvc3BlYy9zZXJ2aWNlX3dvcmtlci9pbmRleC5odG1sI3NlcnZpY2Utd29ya2VyLXJlZ2lzdHJhdGlvbi11cGRhdGUtbWV0aG9kXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWdpc3RyYXRpb24udXBkYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbi51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGVmb3VuZCBpcyBmaXJlZCBpZiBzZXJ2aWNlLXdvcmtlci5qcyBjaGFuZ2VzLlxuICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbi5vbnVwZGF0ZWZvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZWZvdW5kIGlzIGFsc28gZmlyZWQgdGhlIHZlcnkgZmlyc3QgdGltZSB0aGUgU1cgaXMgaW5zdGFsbGVkLFxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgdGhlcmUncyBubyBuZWVkIHRvIHByb21wdCBmb3IgYSByZWxvYWQgYXQgdGhhdCBwb2ludC5cbiAgICAgICAgICAgICAgICAgICAgLy8gU28gY2hlY2sgaGVyZSB0byBzZWUgaWYgdGhlIHBhZ2UgaXMgYWxyZWFkeSBjb250cm9sbGVkLFxuICAgICAgICAgICAgICAgICAgICAvLyBpLmUuIHdoZXRoZXIgdGhlcmUncyBhbiBleGlzdGluZyBzZXJ2aWNlIHdvcmtlci5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSB1cGRhdGVmb3VuZCBldmVudCBpbXBsaWVzIHRoYXQgcmVnaXN0cmF0aW9uLmluc3RhbGxpbmcgaXMgc2V0OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9zbGlnaHRseW9mZi5naXRodWIuaW8vU2VydmljZVdvcmtlci9zcGVjL3NlcnZpY2Vfd29ya2VyL2luZGV4Lmh0bWwjc2VydmljZS13b3JrZXItY29udGFpbmVyLXVwZGF0ZWZvdW5kLWV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFsbGluZ1dvcmtlciA9IHJlZ2lzdHJhdGlvbi5pbnN0YWxsaW5nO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YWxsaW5nV29ya2VyLm9uc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGluc3RhbGxpbmdXb3JrZXIuc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW5zdGFsbGVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF0IHRoaXMgcG9pbnQsIHRoZSBvbGQgY29udGVudCB3aWxsIGhhdmUgYmVlbiBwdXJnZWQgYW5kIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZnJlc2ggY29udGVudCB3aWxsIGhhdmUgYmVlbiBhZGRlZCB0byB0aGUgY2FjaGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIHRoZSBwZXJmZWN0IHRpbWUgdG8gZGlzcGxheSBhICdOZXcgY29udGVudCBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXZhaWxhYmxlOyBwbGVhc2UgcmVmcmVzaC4nIG1lc3NhZ2UgaW4gdGhlIHBhZ2UncyBpbnRlcmZhY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZWR1bmRhbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgaW5zdGFsbGluZyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2VydmljZSB3b3JrZXIgYmVjYW1lIHJlZHVuZGFudC4nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZHVyaW5nIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbjonLCBlKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFlvdXIgY3VzdG9tIEphdmFTY3JpcHQgZ29lcyBoZXJlXG5cbiAgICAvLyB2YXIgcnNzX3R1b2l0cmUgPSAnaHR0cDovL3R1b2l0cmUudm4vcnNzL3R0LXRpbi1tb2ktbmhhdC5yc3MnO1xuICAgIC8vIHZhciByc3Nfdm5leHByZXNzID0gJ2h0dHA6Ly92bmV4cHJlc3MubmV0L3Jzcy90aW4tbW9pLW5oYXQucnNzJztcbiAgICB2YXIgcnNzUmVhZGVyID0gJ3lxbCc7XG4gICAgdmFyIGlzQ2hyb21lID0gL0Nocm9tZS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAvR29vZ2xlIEluYy8udGVzdChuYXZpZ2F0b3IudmVuZG9yKTtcblxuICAgIGZ1bmN0aW9uIHVybEJ1aWxkZXIodHlwZSwgdXJsKSB7XG4gICAgICAgIGlmICh0eXBlID09PSBcInJzc1wiKSB7XG4gICAgICAgICAgICBpZiAocnNzUmVhZGVyID09PSAnZ29vZ2xlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cHM6Ly9hamF4Lmdvb2dsZWFwaXMuY29tL2FqYXgvc2VydmljZXMvZmVlZC9sb2FkP3Y9MS4wJm51bT0yMCZxPScgKyB1cmw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJzc1JlYWRlciA9PT0gJ3lxbCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHBzOi8vcXVlcnkueWFob29hcGlzLmNvbS92MS9wdWJsaWMveXFsP3E9c2VsZWN0JTIwKiUyMGZyb20lMjByc3MlMjB3aGVyZSUyMHVybCUzRCUyMicgKyB1cmwgKyAnJTIyJmZvcm1hdD1qc29uJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZGlzcGxheURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluQ29udGVudCcpO1xuXG4gICAgLy8gUGFydCAxIC0gQ3JlYXRlIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcHJvbWlzZVxuICAgIGZ1bmN0aW9uIGdldEpzb25Bc3luYyh1cmwpIHtcbiAgICAgICAgLy8gUHJvbWlzZXMgcmVxdWlyZSB0d28gZnVuY3Rpb25zOiBvbmUgZm9yIHN1Y2Nlc3MsIG9uZSBmb3IgZmFpbHVyZVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQgJiYgeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGNhbiByZXNvbHZlIHRoZSBwcm9taXNlXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeGhyLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIGEgZmFpbHVyZSwgc28gbGV0J3MgcmVqZWN0IHRoZSBwcm9taXNlXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgnVW5hYmxlIHRvIGxvYWQgUlNTJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gSXQncyBhIGZhaWx1cmUsIHNvIGxldCdzIHJlamVjdCB0aGUgcHJvbWlzZVxuICAgICAgICAgICAgICAgIHJlamVjdCgnVW5hYmxlIHRvIGxvYWQgUlNTJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgeGhyLnNlbmQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0TmV3c0RldGFpbCh0eXBlLCBsaW5rLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAodHlwZSA9PT0gXCJqc29uXCIpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG5ld3NbbGlua10pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2V0IG5ld3MgZGV0YWlsIGJ5IHVzaW5nIHJlc3QgYXBpIHdoaWNoIGFyZSBjcmVhdGVkIGJ5IGltcG9ydC5pb1xuICAgICAgICBzaG93TG9hZGluZygpO1xuICAgICAgICB2YXIgY29ubmVjdG9yID0gJ2U5MjBhOTQ0LWQ3OTktNGVkNy1hMDE3LTMyMmViMjVhY2U3MCc7XG4gICAgICAgIGlmIChsaW5rLmluZGV4T2YoJ3R1b2l0cmUudm4nKSA+IC0xKSB7XG4gICAgICAgICAgICBjb25uZWN0b3IgPSAnYmRmNzJjODktYzk0Yi00OGY0LTk2N2ItYjViYzNmODI4OGY3JztcbiAgICAgICAgfSBlbHNlIGlmIChsaW5rLmluZGV4T2YoJ3ZuZXhwcmVzcy5uZXQnKSA+IC0xIHx8IGxpbmsuaW5kZXhPZignZ2FtZXRodS5uZXQnKSA+IC0xKSB7XG4gICAgICAgICAgICBjb25uZWN0b3IgPSAnZTkyMGE5NDQtZDc5OS00ZWQ3LWEwMTctMzIyZWIyNWFjZTcwJztcbiAgICAgICAgfVxuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6ICdodHRwczovL2FwaS5pbXBvcnQuaW8vc3RvcmUvY29ubmVjdG9yLycgKyBjb25uZWN0b3IgKyAnL19xdWVyeScsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaW5wdXQ6ICd3ZWJwYWdlL3VybDonICsgbGluayxcbiAgICAgICAgICAgICAgICBfYXBpa2V5OiAnNTk1MzFkNWUzODAwNGNiZDk0NDg3MmI2NTdjNDc5ZmI2ZWI4YTk1MTU1NTcwMGMxMzAyMzQ4MmFhZDcxM2RiNTJhNjVkYTY3MGNkMzVkYmU0MmE4ZmMzMjMwMWJiNzhmNDE5Y2JhNjE5YzRjMWMyZTY2ZWNkZTAxZGUyNWI5MGRjMDE0ZGVjZTMyOTUzZDhhZDdjOWRlN2FkNzg4YTI2MSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3BvbnNlLnJlc3VsdHNbMF0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgICAgIHNob3dEaWFsb2coe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogZXJyb3JcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgbmV3cyA9IFtdO1xuXG4gICAgZnVuY3Rpb24gbG9hZE5ld3ModHlwZSwgdXJsKSB7XG4gICAgICAgIHNob3dMb2FkaW5nKCk7XG4gICAgICAgIHVybCA9IHVybEJ1aWxkZXIodHlwZSwgdXJsKTtcbiAgICAgICAgdmFyIHByb21pc2UgPSAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAvLyBjcm9zc0RvbWFpbjogdHJ1ZSxcbiAgICAgICAgICAgIC8vIGRhdGFUeXBlOiBcImpzb25wXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHByb21pc2UuZG9uZShmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgZGlzcGxheURpdi5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGlmICh0eXBlID09PSBcInJzc1wiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJzc1JlYWRlciA9PT0gJ2dvb2dsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3BvbnNlRGF0YS5mZWVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdzID0gcmVzcG9uc2UucmVzcG9uc2VEYXRhLmZlZWQuZW50cmllcztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld3MgPSByZXNwb25zZS5xdWVyeS5yZXN1bHRzLml0ZW07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJzc1JlYWRlciA9PT0gJ3lxbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3cyA9IHJlc3BvbnNlLnF1ZXJ5LnJlc3VsdHMuaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwianNvblwiKSB7XG4gICAgICAgICAgICAgICAgbmV3cyA9IHJlc3BvbnNlLnJlc3VsdHMucmVzdWx0cyB8fCByZXNwb25zZS5yZXN1bHRzLml0ZW1zIHx8IHJlc3BvbnNlLnJlc3VsdHMuY29sbGVjdGlvbjE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgZGlzcGxheURpdi5pbm5lckhUTUwgKz0gZ2V0VGVtcGxhdGVOZXdzKGl0ZW0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQoJ2J1dHRvbi5zaW1wbGUtYWpheC1wb3B1cCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmsgPSAkKHRoaXMpLmRhdGEoJ2xpbmsnKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhsaW5rKTtcbiAgICAgICAgICAgICAgICBpZiAoIWxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0RpYWxvZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ25vIGxpbmsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbGlua1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBcImpzb25cIikge1xuICAgICAgICAgICAgICAgICAgICBsaW5rID0gJCh0aGlzKS5wYXJlbnRzKCcubmV3cy1pdGVtJykuaW5kZXgoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGdldE5ld3NEZXRhaWwodHlwZSwgbGluaywgZnVuY3Rpb24oZGV0YWlsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50X2h0bWwgPSBkZXRhaWwuY29udGVudF9odG1sIHx8IGRldGFpbC5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQ2hyb21lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50X2h0bWwgPSBjb250ZW50X2h0bWwucmVwbGFjZShuZXcgUmVnRXhwKCcud2VicCcsICdnJyksICcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgJGNvbnRlbnQgPSAkKCc8ZGl2PicgKyBjb250ZW50X2h0bWwgKyAnPC9kaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRlbnQuZmluZCgnLm5vY29udGVudCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgJGNvbnRlbnQgPSAkKGNvbnRlbnRfaHRtbCkuc2libGluZ3MoXCIubm9jb250ZW50XCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBzaG93RGlhbG9nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBkZXRhaWwudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAkY29udGVudC5odG1sKClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLmNvbXBsZXRlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VGVtcGxhdGVOZXdzKG5ld3MpIHtcbiAgICAgICAgaWYgKCFuZXdzLmNvbnRlbnQpIHtcbiAgICAgICAgICAgIG5ld3MuY29udGVudCA9IG5ld3MuZGVzY3JpcHRpb24gfHwgXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBuZXdzLmNvbnRlbnQgPSBuZXdzLmNvbnRlbnQucmVwbGFjZShuZXcgUmVnRXhwKCcvczE0Ni8nLCAnZycpLCAnL3M0NDAvJyk7XG4gICAgICAgIG5ld3Muc3VtbWFyeSA9IG5ld3Muc3VtbWFyeSB8fCBuZXdzLmNvbnRlbnQ7XG4gICAgICAgIGlmICghbmV3cy5pbWFnZSAmJiBuZXdzLnN1bW1hcnkuaW5kZXhPZignPGltZyAnKSA9PT0gLTEgJiYgbmV3cy5jb250ZW50LmluZGV4T2YoJzxpbWcgJykgPiAtMSkge1xuICAgICAgICAgICAgbmV3cy5pbWFnZSA9ICQobmV3cy5jb250ZW50KS5maW5kKCdpbWc6Zmlyc3QtY2hpbGQnKS5hdHRyKCdzcmMnKTtcbiAgICAgICAgfVxuICAgICAgICBuZXdzLmltYWdlID0gKG5ld3MuaW1hZ2UpID8gYDxpbWcgc3JjPVwiJHtuZXdzLmltYWdlLnJlcGxhY2UobmV3IFJlZ0V4cCgnL3MxNDYvJywgJ2cnKSwgJy9zNDQwLycpfVwiIC8+YCA6ICcnO1xuICAgICAgICBpZiAoIWlzQ2hyb21lKSB7XG4gICAgICAgICAgICBuZXdzLmltYWdlID0gbmV3cy5pbWFnZS5yZXBsYWNlKG5ldyBSZWdFeHAoJy53ZWJwJywgJ2cnKSwgJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3cy50aW1lID0gbmV3cy50aW1lIHx8IG5ld3MucHVibGlzaGVkRGF0ZSB8fCBuZXdzLnB1YkRhdGUgfHwgJyc7XG4gICAgICAgIG5ld3MubGluayA9IG5ld3MubGluayB8fCBuZXdzLnVybDtcbiAgICAgICAgbmV3cy5zb3VyY2VUZXh0ID0gbmV3cy5zb3VyY2UgPyAnIC0gJyArIG5ld3Muc291cmNlLnRleHQgOiAnJztcbiAgICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPSduZXdzLWl0ZW0gbWRsLWNvbG9yLXRleHQtLWdyZXktNzAwIG1kbC1zaGFkb3ctLTJkcCc+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9J25ld3MtaXRlbV9fdGl0bGUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0nbmV3cy1pdGVtX190aXRsZS10ZXh0IG1kbC10eXBvZ3JhcGh5LS10aXRsZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAke25ld3MudGl0bGV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9J25ld3MtaXRlbV9fdGl0bGUtdGltZSc+JHtuZXdzLnRpbWV9IDxiPiR7bmV3cy5zb3VyY2VUZXh0fTwvYj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9J25ld3MtaXRlbV9fY29udGVudCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAke25ld3MuaW1hZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAke25ld3Muc3VtbWFyeX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9J25ld3MtaXRlbV9fYWN0aW9ucyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGRhdGEtbGluaz0nJHtuZXdzLmxpbmt9JyBjbGFzcz0nbWRsLWJ1dHRvbiBtZGwtYnV0dG9uLS1jb2xvcmVkIG1kbC1qcy1idXR0b24gbWRsLWpzLXJpcHBsZS1lZmZlY3Qgc2ltcGxlLWFqYXgtcG9wdXAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBWaWV3IG1vcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0nJHtuZXdzLmxpbmt9JyB0YXJnZXQ9J19ibGFuaycgY2xhc3M9J21kbC1idXR0b24gbWRsLWJ1dHRvbi0tY29sb3JlZCBtZGwtanMtYnV0dG9uIG1kbC1qcy1yaXBwbGUtZWZmZWN0IHNpbXBsZS1hamF4LXBvcHVwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgT3BlbiB3ZWJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+YFxuICAgIH1cblxuICAgICQoJy5jaGFuZ2UtbmV3cycpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgbG9hZE5ld3MoJCh0aGlzKS5kYXRhKCd0eXBlJyksICQodGhpcykuZGF0YSgndXJsJykpO1xuICAgICAgICAkKFwiLm1kbC1sYXlvdXRfX29iZnVzY2F0b3JcIikuY2xpY2soKTtcbiAgICB9KTtcbiAgICAkKCcuY2hhbmdlLW5ld3M6Zmlyc3QtY2hpbGQnKS5jbGljaygpO1xuXG4gICAgLy8gUExVR0lOIG1kbC1qcXVlcnktbW9kYWwtZGlhbG9nLmpzXG4gICAgZnVuY3Rpb24gc2hvd0xvYWRpbmcoKSB7XG4gICAgICAgIC8vIHJlbW92ZSBleGlzdGluZyBsb2FkZXJzXG4gICAgICAgICQoJy5sb2FkaW5nLWNvbnRhaW5lcicpLnJlbW92ZSgpO1xuICAgICAgICAkKCc8ZGl2IGlkPVwib3Jyc0xvYWRlclwiIGNsYXNzPVwibG9hZGluZy1jb250YWluZXJcIj48ZGl2PjxkaXYgY2xhc3M9XCJtZGwtc3Bpbm5lciBtZGwtanMtc3Bpbm5lciBpcy1hY3RpdmVcIj48L2Rpdj48L2Rpdj48L2Rpdj4nKS5hcHBlbmRUbyhcImJvZHlcIik7XG5cbiAgICAgICAgY29tcG9uZW50SGFuZGxlci51cGdyYWRlRWxlbWVudHMoJCgnLm1kbC1zcGlubmVyJykuZ2V0KCkpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnI29ycnNMb2FkZXInKS5jc3Moe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCAxKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoaWRlTG9hZGluZygpIHtcbiAgICAgICAgJCgnI29ycnNMb2FkZXInKS5jc3Moe1xuICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICB9KTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJyNvcnJzTG9hZGVyJykucmVtb3ZlKCk7XG4gICAgICAgIH0sIDQwMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd0RpYWxvZyhvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7XG4gICAgICAgICAgICBpZDogJ29ycnNEaWFnJyxcbiAgICAgICAgICAgIHRpdGxlOiBudWxsLFxuICAgICAgICAgICAgdGV4dDogbnVsbCxcbiAgICAgICAgICAgIG5lZ2F0aXZlOiBmYWxzZSxcbiAgICAgICAgICAgIHBvc2l0aXZlOiBmYWxzZSxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICAgICAgICBjb250ZW50U3R5bGU6IG51bGwsXG4gICAgICAgICAgICBvbkxvYWRlZDogZmFsc2VcbiAgICAgICAgfSwgb3B0aW9ucyk7XG5cbiAgICAgICAgLy8gcmVtb3ZlIGV4aXN0aW5nIGRpYWxvZ3NcbiAgICAgICAgJCgnLmRpYWxvZy1jb250YWluZXInKS5yZW1vdmUoKTtcbiAgICAgICAgJChkb2N1bWVudCkudW5iaW5kKFwia2V5dXAuZGlhbG9nXCIpO1xuXG4gICAgICAgICQoJzxkaXYgaWQ9XCInICsgb3B0aW9ucy5pZCArICdcIiBjbGFzcz1cImRpYWxvZy1jb250YWluZXJcIj48ZGl2IGNsYXNzPVwibWRsLWNhcmQgbWRsLXNoYWRvdy0tMTZkcFwiPjwvZGl2PjwvZGl2PicpLmFwcGVuZFRvKFwiYm9keVwiKTtcbiAgICAgICAgdmFyIGRpYWxvZyA9ICQoJyNvcnJzRGlhZycpO1xuICAgICAgICB2YXIgY29udGVudCA9IGRpYWxvZy5maW5kKCcubWRsLWNhcmQnKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29udGVudFN0eWxlICE9IG51bGwpIGNvbnRlbnQuY3NzKG9wdGlvbnMuY29udGVudFN0eWxlKTtcbiAgICAgICAgaWYgKG9wdGlvbnMudGl0bGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgJCgnPGg1PicgKyBvcHRpb25zLnRpdGxlICsgJzwvaDU+JykuYXBwZW5kVG8oY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMudGV4dCAhPSBudWxsKSB7XG4gICAgICAgICAgICAkKCc8cD4nICsgb3B0aW9ucy50ZXh0ICsgJzwvcD4nKS5hcHBlbmRUbyhjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5uZWdhdGl2ZSB8fCBvcHRpb25zLnBvc2l0aXZlKSB7XG4gICAgICAgICAgICB2YXIgYnV0dG9uQmFyID0gJCgnPGRpdiBjbGFzcz1cIm1kbC1jYXJkX19hY3Rpb25zIGRpYWxvZy1idXR0b24tYmFyXCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5uZWdhdGl2ZSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubmVnYXRpdmUgPSAkLmV4dGVuZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAnbmVnYXRpdmUnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0NhbmNlbCcsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgb3B0aW9ucy5uZWdhdGl2ZSk7XG4gICAgICAgICAgICAgICAgdmFyIG5lZ0J1dHRvbiA9ICQoJzxidXR0b24gY2xhc3M9XCJtZGwtYnV0dG9uIG1kbC1qcy1idXR0b24gbWRsLWpzLXJpcHBsZS1lZmZlY3RcIiBpZD1cIicgKyBvcHRpb25zLm5lZ2F0aXZlLmlkICsgJ1wiPicgKyBvcHRpb25zLm5lZ2F0aXZlLnRpdGxlICsgJzwvYnV0dG9uPicpO1xuICAgICAgICAgICAgICAgIG5lZ0J1dHRvbi5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLm5lZ2F0aXZlLm9uQ2xpY2soZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlRGlhbG9nKGRpYWxvZylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBuZWdCdXR0b24uYXBwZW5kVG8oYnV0dG9uQmFyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnBvc2l0aXZlKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5wb3NpdGl2ZSA9ICQuZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdwb3NpdGl2ZScsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT0snLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMucG9zaXRpdmUpO1xuICAgICAgICAgICAgICAgIHZhciBwb3NCdXR0b24gPSAkKCc8YnV0dG9uIGNsYXNzPVwibWRsLWJ1dHRvbiBtZGwtYnV0dG9uLS1jb2xvcmVkIG1kbC1qcy1idXR0b24gbWRsLWpzLXJpcHBsZS1lZmZlY3RcIiBpZD1cIicgKyBvcHRpb25zLnBvc2l0aXZlLmlkICsgJ1wiPicgKyBvcHRpb25zLnBvc2l0aXZlLnRpdGxlICsgJzwvYnV0dG9uPicpO1xuICAgICAgICAgICAgICAgIHBvc0J1dHRvbi5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLnBvc2l0aXZlLm9uQ2xpY2soZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlRGlhbG9nKGRpYWxvZylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwb3NCdXR0b24uYXBwZW5kVG8oYnV0dG9uQmFyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1dHRvbkJhci5hcHBlbmRUbyhjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBjb21wb25lbnRIYW5kbGVyLnVwZ3JhZGVEb20oKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY2FuY2VsYWJsZSkge1xuICAgICAgICAgICAgZGlhbG9nLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGhpZGVEaWFsb2coZGlhbG9nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJChkb2N1bWVudCkuYmluZChcImtleXVwLmRpYWxvZ1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUud2hpY2ggPT0gMjcpXG4gICAgICAgICAgICAgICAgICAgIGhpZGVEaWFsb2coZGlhbG9nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGVudC5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkaWFsb2cuY3NzKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm9uTG9hZGVkKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMub25Mb2FkZWQoKTtcbiAgICAgICAgfSwgMSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGlkZURpYWxvZyhkaWFsb2cpIHtcbiAgICAgICAgJChkb2N1bWVudCkudW5iaW5kKFwia2V5dXAuZGlhbG9nXCIpO1xuICAgICAgICBkaWFsb2cuY3NzKHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgfSk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkaWFsb2cucmVtb3ZlKCk7XG4gICAgICAgIH0sIDQwMCk7XG4gICAgfVxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==\n","/* eslint-env browser */\n\n(function() {\n    'use strict';\n\n    // Check to make sure service workers are supported in the current browser,\n    // and that the current page is accessed from a secure origin. Using a\n    // service worker from an insecure origin will trigger JS console errors. See\n    // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n    var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.1/8 is considered localhost for IPv4.\n        window.location.hostname.match(\n            /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n        )\n    );\n\n    if ('serviceWorker' in navigator &&\n        (window.location.protocol === 'https:' || isLocalhost)) {\n        navigator.serviceWorker.register('service-worker.js')\n            .then(function(registration) {\n                // Check to see if there's an updated version of service-worker.js with\n                // new files to cache:\n                // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-registration-update-method\n                if (typeof registration.update === 'function') {\n                    registration.update();\n                }\n\n                // updatefound is fired if service-worker.js changes.\n                registration.onupdatefound = function() {\n                    // updatefound is also fired the very first time the SW is installed,\n                    // and there's no need to prompt for a reload at that point.\n                    // So check here to see if the page is already controlled,\n                    // i.e. whether there's an existing service worker.\n                    if (navigator.serviceWorker.controller) {\n                        // The updatefound event implies that registration.installing is set:\n                        // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n                        var installingWorker = registration.installing;\n\n                        installingWorker.onstatechange = function() {\n                            switch (installingWorker.state) {\n                                case 'installed':\n                                    // At this point, the old content will have been purged and the\n                                    // fresh content will have been added to the cache.\n                                    // It's the perfect time to display a 'New content is\n                                    // available; please refresh.' message in the page's interface.\n                                    break;\n\n                                case 'redundant':\n                                    throw new Error('The installing ' +\n                                        'service worker became redundant.');\n\n                                default:\n                                    // Ignore\n                            }\n                        };\n                    }\n                };\n            }).catch(function(e) {\n                console.error('Error during service worker registration:', e);\n            });\n    }\n\n    // Your custom JavaScript goes here\n\n    // var rss_tuoitre = 'http://tuoitre.vn/rss/tt-tin-moi-nhat.rss';\n    // var rss_vnexpress = 'http://vnexpress.net/rss/tin-moi-nhat.rss';\n    var rssReader = 'yql';\n    var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n\n    function urlBuilder(type, url) {\n        if (type === \"rss\") {\n            if (rssReader === 'google') {\n                return 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=20&q=' + url;\n            } else if (rssReader === 'yql') {\n                return 'https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20rss%20where%20url%3D%22' + url + '%22&format=json';\n            }\n        } else {\n            return url;\n        }\n    }\n\n    var displayDiv = document.getElementById('mainContent');\n\n    // Part 1 - Create a function that returns a promise\n    function getJsonAsync(url) {\n        // Promises require two functions: one for success, one for failure\n        return new Promise(function(resolve, reject) {\n            var xhr = new XMLHttpRequest();\n            xhr.open('GET', url);\n            xhr.onload = () => {\n                if (xhr.readyState == 4 && xhr.status === 200) {\n                    // We can resolve the promise\n                    resolve(xhr.response);\n                } else {\n                    // It's a failure, so let's reject the promise\n                    reject('Unable to load RSS');\n                }\n            }\n            xhr.onerror = () => {\n                // It's a failure, so let's reject the promise\n                reject('Unable to load RSS');\n            };\n            xhr.send();\n        });\n    }\n\n    function getNewsDetail(type, link, callback) {\n        if (type === \"json\") {\n            callback(news[link]);\n            return;\n        }\n\n        // get news detail by using rest api which are created by import.io\n        showLoading();\n        var connector = 'e920a944-d799-4ed7-a017-322eb25ace70';\n        if (link.indexOf('tuoitre.vn') > -1) {\n            connector = 'bdf72c89-c94b-48f4-967b-b5bc3f8288f7';\n        } else if (link.indexOf('vnexpress.net') > -1 || link.indexOf('gamethu.net') > -1) {\n            connector = 'e920a944-d799-4ed7-a017-322eb25ace70';\n        }\n\n        $.ajax({\n            url: 'https://api.import.io/store/connector/' + connector + '/_query',\n            data: {\n                input: 'webpage/url:' + link,\n                _apikey: '59531d5e38004cbd944872b657c479fb6eb8a951555700c13023482aad713db52a65da670cd35dbe42a8fc32301bb78f419cba619c4c1c2e66ecde01de25b90dc014dece32953d8ad7c9de7ad788a261'\n            },\n            success: function(response) {\n                callback(response.results[0]);\n            },\n            error: function(error) {\n                showDialog({\n                    title: 'Error',\n                    text: error\n                })\n            },\n            complete: function() {\n                hideLoading();\n            }\n        });\n    }\n\n    var news = [];\n\n    function loadNews(type, url) {\n        showLoading();\n        url = urlBuilder(type, url);\n        var promise = $.ajax({\n            url: url,\n            // crossDomain: true,\n            // dataType: \"jsonp\"\n        });\n        promise.done(function(response) {\n            displayDiv.innerHTML = '';\n            if (type === \"rss\") {\n                if (rssReader === 'google') {\n                    if (response.responseData.feed) {\n                        news = response.responseData.feed.entries;\n                    } else {\n                        news = response.query.results.item;\n                    }\n                } else if (rssReader === 'yql') {\n                    news = response.query.results.item;\n                }\n            } else if (type === \"json\") {\n                news = response.results.results || response.results.items || response.results.collection1;\n            }\n            news.forEach(item => {\n                displayDiv.innerHTML += getTemplateNews(item);\n            });\n\n            $('button.simple-ajax-popup').on('click', function(e) {\n                e.preventDefault();\n                var link = $(this).data('link');\n                console.log(link);\n                if (!link) {\n                    showDialog({\n                        title: 'no link',\n                        text: link\n                    })\n                    return;\n                }\n                if (type === \"json\") {\n                    link = $(this).parents('.news-item').index();\n                };\n                getNewsDetail(type, link, function(detail) {\n                    var content_html = detail.content_html || detail.content;\n                    if (!isChrome) {\n                        content_html = content_html.replace(new RegExp('.webp', 'g'), '');\n                    }\n                    var $content = $('<div>' + content_html + '</div');\n                    $content.find('.nocontent').remove();\n                    // var $content = $(content_html).siblings(\".nocontent\").remove();\n                    showDialog({\n                        title: detail.title,\n                        text: $content.html()\n                    })\n                })\n            });\n        }).complete(function() {\n            hideLoading();\n        });\n    }\n\n    function getTemplateNews(news) {\n        if (!news.content) {\n            news.content = news.description || \"\";\n        }\n        news.content = news.content.replace(new RegExp('/s146/', 'g'), '/s440/');\n        news.summary = news.summary || news.content;\n        if (!news.image && news.summary.indexOf('<img ') === -1 && news.content.indexOf('<img ') > -1) {\n            news.image = $(news.content).find('img:first-child').attr('src');\n        }\n        news.image = (news.image) ? `<img src=\"${news.image.replace(new RegExp('/s146/', 'g'), '/s440/')}\" />` : '';\n        if (!isChrome) {\n            news.image = news.image.replace(new RegExp('.webp', 'g'), '');\n        }\n\n        news.time = news.time || news.publishedDate || news.pubDate || '';\n        news.link = news.link || news.url;\n        news.sourceText = news.source ? ' - ' + news.source.text : '';\n        return `<div class='news-item mdl-color-text--grey-700 mdl-shadow--2dp'>\n                    <div class='news-item__title'>\n                        <div class='news-item__title-text mdl-typography--title'>\n                           ${news.title}\n                        </div>\n                        <div class='news-item__title-time'>${news.time} <b>${news.sourceText}</b></div>\n                    </div>\n                    <div class='news-item__content'>\n                        ${news.image}\n                        ${news.summary}\n                    </div>\n                    <div class='news-item__actions'>\n                        <button data-link='${news.link}' class='mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect simple-ajax-popup'>\n                          View more\n                        </button>\n                        <a href='${news.link}' target='_blank' class='mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect simple-ajax-popup'>\n                          Open web\n                        </a>\n                    </div>\n                </div>`\n    }\n\n    $('.change-news').click(function(e) {\n        loadNews($(this).data('type'), $(this).data('url'));\n        $(\".mdl-layout__obfuscator\").click();\n    });\n    $('.change-news:first-child').click();\n\n    // PLUGIN mdl-jquery-modal-dialog.js\n    function showLoading() {\n        // remove existing loaders\n        $('.loading-container').remove();\n        $('<div id=\"orrsLoader\" class=\"loading-container\"><div><div class=\"mdl-spinner mdl-js-spinner is-active\"></div></div></div>').appendTo(\"body\");\n\n        componentHandler.upgradeElements($('.mdl-spinner').get());\n        setTimeout(function() {\n            $('#orrsLoader').css({\n                opacity: 1\n            });\n        }, 1);\n    }\n\n    function hideLoading() {\n        $('#orrsLoader').css({\n            opacity: 0\n        });\n        setTimeout(function() {\n            $('#orrsLoader').remove();\n        }, 400);\n    }\n\n    function showDialog(options) {\n        options = $.extend({\n            id: 'orrsDiag',\n            title: null,\n            text: null,\n            negative: false,\n            positive: false,\n            cancelable: true,\n            contentStyle: null,\n            onLoaded: false\n        }, options);\n\n        // remove existing dialogs\n        $('.dialog-container').remove();\n        $(document).unbind(\"keyup.dialog\");\n\n        $('<div id=\"' + options.id + '\" class=\"dialog-container\"><div class=\"mdl-card mdl-shadow--16dp\"></div></div>').appendTo(\"body\");\n        var dialog = $('#orrsDiag');\n        var content = dialog.find('.mdl-card');\n        if (options.contentStyle != null) content.css(options.contentStyle);\n        if (options.title != null) {\n            $('<h5>' + options.title + '</h5>').appendTo(content);\n        }\n        if (options.text != null) {\n            $('<p>' + options.text + '</p>').appendTo(content);\n        }\n        if (options.negative || options.positive) {\n            var buttonBar = $('<div class=\"mdl-card__actions dialog-button-bar\"></div>');\n            if (options.negative) {\n                options.negative = $.extend({\n                    id: 'negative',\n                    title: 'Cancel',\n                    onClick: function() {\n                        return false;\n                    }\n                }, options.negative);\n                var negButton = $('<button class=\"mdl-button mdl-js-button mdl-js-ripple-effect\" id=\"' + options.negative.id + '\">' + options.negative.title + '</button>');\n                negButton.click(function(e) {\n                    e.preventDefault();\n                    if (!options.negative.onClick(e))\n                        hideDialog(dialog)\n                });\n                negButton.appendTo(buttonBar);\n            }\n            if (options.positive) {\n                options.positive = $.extend({\n                    id: 'positive',\n                    title: 'OK',\n                    onClick: function() {\n                        return false;\n                    }\n                }, options.positive);\n                var posButton = $('<button class=\"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\" id=\"' + options.positive.id + '\">' + options.positive.title + '</button>');\n                posButton.click(function(e) {\n                    e.preventDefault();\n                    if (!options.positive.onClick(e))\n                        hideDialog(dialog)\n                });\n                posButton.appendTo(buttonBar);\n            }\n            buttonBar.appendTo(content);\n        }\n        componentHandler.upgradeDom();\n        if (options.cancelable) {\n            dialog.click(function() {\n                hideDialog(dialog);\n            });\n            $(document).bind(\"keyup.dialog\", function(e) {\n                if (e.which == 27)\n                    hideDialog(dialog);\n            });\n            content.click(function(e) {\n                e.stopPropagation();\n            });\n        }\n        setTimeout(function() {\n            dialog.css({\n                opacity: 1\n            });\n            if (options.onLoaded)\n                options.onLoaded();\n        }, 1);\n    }\n\n    function hideDialog(dialog) {\n        $(document).unbind(\"keyup.dialog\");\n        dialog.css({\n            opacity: 0\n        });\n        setTimeout(function() {\n            dialog.remove();\n        }, 400);\n    }\n})();\n"],"sourceRoot":"/source/"}