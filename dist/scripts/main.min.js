"use strict";!function(){function e(e,t){return"rss"!==e?t:"google"===r?"https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=20&q="+t:"yql"===r?"https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20rss%20where%20url%3D%22"+t+"%22&format=json":void 0}function t(e,t,n){if("json"===e)return void n(u[t]);o();var i="e920a944-d799-4ed7-a017-322eb25ace70";t.indexOf("tuoitre.vn")>-1?i="bdf72c89-c94b-48f4-967b-b5bc3f8288f7":(t.indexOf("vnexpress.net")>-1||t.indexOf("gamethu.net")>-1)&&(i="e920a944-d799-4ed7-a017-322eb25ace70"),$.ajax({url:"https://api.import.io/store/connector/"+i+"/_query",data:{input:"webpage/url:"+t,_apikey:"59531d5e38004cbd944872b657c479fb6eb8a951555700c13023482aad713db52a65da670cd35dbe42a8fc32301bb78f419cba619c4c1c2e66ecde01de25b90dc014dece32953d8ad7c9de7ad788a261"},success:function(e){n(e.results[0])},error:function(e){c({title:"Error",text:e})},complete:function(){a()}})}function n(n,d){o(),d=e(n,d);var l=$.ajax({url:d});l.done(function(e){s.innerHTML="","rss"===n?"google"===r?u=e.responseData.feed?e.responseData.feed.entries:e.query.results.item:"yql"===r&&(u=e.query.results.item):"json"===n&&(u=e.results.results),u.forEach(function(e){s.innerHTML+=i(e)}),$("button.simple-ajax-popup").on("click",function(e){e.preventDefault();var i=$(this).data("link");return console.log(i),i?("json"===n&&(i=$(this).parents(".news-item").index()),void t(n,i,function(e){var t=e.content_html||e.content;c({title:e.title,text:t})})):void c({title:"no link",text:i})})}).complete(function(){a()})}function i(e){return e.content||(e.content=e.description||""),e.content=e.content.replace(new RegExp("/s146/","g"),"/s440/"),e.summary=e.summary||e.content,!e.image&&-1===e.summary.indexOf("<img ")&&e.content.indexOf("<img ")>-1&&(e.image=$(e.content).find("img:first-child").attr("src")),e.image=e.image?'<img src="'+e.image.replace(new RegExp("/s146/","g"),"/s440/")+'" />':"",e.time=e.time||e.publishedDate||e.pubDate||"",e.link=e.link||e.url,"<div class='news-item mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--4-col-phone'>\n                    <div class='mdl-card mdl-shadow--2dp'>\n                        <div class='mdl-card__title mdl-card--expand'>\n                            <div class='mdl-card__title-text'>\n                               "+e.title+"\n                            </div>\n                            <div class='mdl-card__title-time'>"+e.time+"</div>\n                        </div>\n                        <div class='mdl-card__supporting-text content'>\n                            "+e.image+"\n                            "+e.summary+"\n                        </div>\n                        <div class='mdl-card__actions mdl-card--border'>\n                            <button data-link='"+e.link+"' class='mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect simple-ajax-popup'>\n                              View more\n                            </button>\n                            <a href='"+e.link+"' target='_blank' class='mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect simple-ajax-popup'>\n                              Open web\n                            </a>\n                        </div>\n                    </div>\n                </div>"}function o(){$(".loading-container").remove(),$('<div id="orrsLoader" class="loading-container"><div><div class="mdl-spinner mdl-js-spinner is-active"></div></div></div>').appendTo("body"),componentHandler.upgradeElements($(".mdl-spinner").get()),setTimeout(function(){$("#orrsLoader").css({opacity:1})},1)}function a(){$("#orrsLoader").css({opacity:0}),setTimeout(function(){$("#orrsLoader").remove()},400)}function c(e){e=$.extend({id:"orrsDiag",title:null,text:null,negative:!1,positive:!1,cancelable:!0,contentStyle:null,onLoaded:!1},e),$(".dialog-container").remove(),$(document).unbind("keyup.dialog"),$('<div id="'+e.id+'" class="dialog-container"><div class="mdl-card mdl-shadow--16dp"></div></div>').appendTo("body");var t=$("#orrsDiag"),n=t.find(".mdl-card");if(null!=e.contentStyle&&n.css(e.contentStyle),null!=e.title&&$("<h5>"+e.title+"</h5>").appendTo(n),null!=e.text&&$("<p>"+e.text+"</p>").appendTo(n),e.negative||e.positive){var i=$('<div class="mdl-card__actions dialog-button-bar"></div>');if(e.negative){e.negative=$.extend({id:"negative",title:"Cancel",onClick:function(){return!1}},e.negative);var o=$('<button class="mdl-button mdl-js-button mdl-js-ripple-effect" id="'+e.negative.id+'">'+e.negative.title+"</button>");o.click(function(n){n.preventDefault(),e.negative.onClick(n)||d(t)}),o.appendTo(i)}if(e.positive){e.positive=$.extend({id:"positive",title:"OK",onClick:function(){return!1}},e.positive);var a=$('<button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" id="'+e.positive.id+'">'+e.positive.title+"</button>");a.click(function(n){n.preventDefault(),e.positive.onClick(n)||d(t)}),a.appendTo(i)}i.appendTo(n)}componentHandler.upgradeDom(),e.cancelable&&(t.click(function(){d(t)}),$(document).bind("keyup.dialog",function(e){27==e.which&&d(t)}),n.click(function(e){e.stopPropagation()})),setTimeout(function(){t.css({opacity:1}),e.onLoaded&&e.onLoaded()},1)}function d(e){$(document).unbind("keyup.dialog"),e.css({opacity:0}),setTimeout(function(){e.remove()},400)}var l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&("https:"===window.location.protocol||l)&&navigator.serviceWorker.register("service-worker.js").then(function(e){"function"==typeof e.update&&e.update(),e.onupdatefound=function(){if(navigator.serviceWorker.controller){var t=e.installing;t.onstatechange=function(){switch(t.state){case"installed":break;case"redundant":throw new Error("The installing service worker became redundant.")}}}}})["catch"](function(e){console.error("Error during service worker registration:",e)});var r="yql",s=document.getElementById("mainContent"),u=[];$(".change-news").click(function(e){n($(this).data("type"),$(this).data("url")),$(".mdl-layout__obfuscator").click()}),$(".change-news:first-child").click()}();
//# sourceMappingURL=main.min.js.map
